var __webpack_modules__={631:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(81),i=n.n(r),a=n(645),s=n.n(a)()(i());s.push([e.id,"@supports(display: contents){weavy-root,weavy-app,weavy-messenger,weavy-chat,weavy-posts,weavy-files{display:contents}}@supports not (display: contents){weavy-root,weavy-app,weavy-messenger,weavy-chat,weavy-posts,weavy-files{display:flex;position:absolute;top:0;left:0;right:0;bottom:0;pointer-events:none}}",""]);const o=s.toString()},212:(e,t,n)=>{n.d(t,{Z:()=>w});var r=n(81),i=n.n(r),a=n(645),s=n.n(a),o=n(667),l=n.n(o),c=new URL(n(6),n.b),h=s()(i()),d=l()(c);h.push([e.id,`:where(:root,:host>*){--wy-theme: #00658e;--wy-black: #000000;--wy-white: #ffffff;--wy-shadow: #000000;--wy-primary-99: #fbfcff;--wy-primary-95: #e4f3ff;--wy-primary-90: #c7e7ff;--wy-primary-80: #84cfff;--wy-primary-70: #53b5ec;--wy-primary-60: #2f9ad0;--wy-primary-50: #007fb2;--wy-primary-40: #00658e;--wy-primary-30: #004c6c;--wy-primary-20: #00344c;--wy-primary-10: #001e2e;--wy-secondary-99: #fffbff;--wy-secondary-95: #fff2a4;--wy-secondary-90: #f6e468;--wy-secondary-80: #d9c84f;--wy-secondary-70: #bcad36;--wy-secondary-60: #a0921a;--wy-secondary-50: #857800;--wy-secondary-40: #6a5f00;--wy-secondary-30: #504700;--wy-secondary-20: #373100;--wy-secondary-10: #201c00;--wy-tertiary-99: #fffbff;--wy-tertiary-95: #fff2a4;--wy-tertiary-90: #f6e468;--wy-tertiary-80: #d9c84f;--wy-tertiary-70: #bcad36;--wy-tertiary-60: #a0921a;--wy-tertiary-50: #857800;--wy-tertiary-40: #6a5f00;--wy-tertiary-30: #504700;--wy-tertiary-20: #373100;--wy-tertiary-10: #201c00;--wy-error-99: #fffbff;--wy-error-95: #ffedea;--wy-error-90: #ffdad6;--wy-error-80: #ffb4ab;--wy-error-70: #ff897d;--wy-error-60: #ff5449;--wy-error-50: #de3730;--wy-error-40: #ba1a1a;--wy-error-30: #93000a;--wy-error-20: #690005;--wy-error-10: #410002;--wy-neutral-99: #fcfcff;--wy-neutral-95: #f0f1f3;--wy-neutral-90: #e2e2e5;--wy-neutral-80: #c5c6c9;--wy-neutral-70: #aaabae;--wy-neutral-60: #8f9193;--wy-neutral-50: #75777a;--wy-neutral-40: #5c5e61;--wy-neutral-30: #454749;--wy-neutral-20: #2e3133;--wy-neutral-10: #191c1e;--wy-neutral-variant-99: #fbfcff;--wy-neutral-variant-95: #ebf1f8;--wy-neutral-variant-90: #dde3ea;--wy-neutral-variant-80: #c1c7ce;--wy-neutral-variant-70: #a5acb2;--wy-neutral-variant-60: #8b9198;--wy-neutral-variant-50: #71787e;--wy-neutral-variant-40: #595f65;--wy-neutral-variant-30: #41484d;--wy-neutral-variant-20: #2b3136;--wy-neutral-variant-10: #161c21;--wy-surface-1-light: #f0f4f9;--wy-surface-2-light: #e8f0f6;--wy-surface-3-light: #e0ebf2;--wy-surface-4-light: #deeaf1;--wy-surface-5-light: #d9e7ef;--wy-surface-1-dark: #1e2428;--wy-surface-2-dark: #212a2f;--wy-surface-3-dark: #242f36;--wy-surface-4-dark: #253138;--wy-surface-5-dark: #27343c;--wy-blue-light: #7aadfa;--wy-indigo-light: #8489e0;--wy-purple-light: #bd78c2;--wy-pink-light: #d072a2;--wy-red-light: #da717c;--wy-orange-light: #ef9646;--wy-yellow-light: #d9c84f;--wy-green-light: #56a15c;--wy-teal-light: #00a29d;--wy-cyan-light: #008398;--wy-gray-light: #75777a;--wy-blue-dark: #a7c8ff;--wy-indigo-dark: #8489e0;--wy-purple-dark: #da92de;--wy-pink-dark: #ee8cbe;--wy-red-dark: #da717c;--wy-orange-dark: #ef9646;--wy-yellow-dark: #d9c84f;--wy-green-dark: #56a15c;--wy-teal-dark: #00a29d;--wy-cyan-dark: #009fb8;--wy-gray-dark: #8f9193}:where(:root,:host>*,.wy-light){color-scheme:light;--wy-primary: var(--wy-primary-40);--wy-on-primary: var(--wy-white);--wy-primary-container: var(--wy-primary-90);--wy-on-primary-container: var(--wy-primary-10);--wy-secondary: var(--wy-secondary-40);--wy-on-secondary: var(--wy-white);--wy-secondary-container: var(--wy-secondary-90);--wy-on-secondary-container: var(--wy-secondary-10);--wy-tertiary: var(--wy-tertiary-40);--wy-on-tertiary: var(--wy-white);--wy-tertiary-container: var(--wy-tertiary-90);--wy-on-tertiary-container: var(--wy-tertiary-10);--wy-error: var(--wy-error-40);--wy-on-error: var(--wy-white);--wy-error-container: var(--wy-error-90);--wy-on-error-container: var(--wy-error-10);--wy-background: var(--wy-neutral-99);--wy-on-background: var(--wy-neutral-10);--wy-surface: var(--wy-neutral-99);--wy-on-surface: var(--wy-neutral-10);--wy-surface-variant: var(--wy-neutral-variant-90);--wy-on-surface-variant: var(--wy-neutral-variant-30);--wy-outline: var(--wy-neutral-variant-50);--wy-outline-variant: var(--wy-neutral-variant-80);--wy-inverse-surface: var(--wy-neutral-20);--wy-on-inverse-surface: var(--wy-neutral-95);--wy-inverse-primary: var(--wy-primary-80);--wy-surface-1: var(--wy-surface-1-light);--wy-surface-2: var(--wy-surface-2-light);--wy-surface-3: var(--wy-surface-3-light);--wy-surface-4: var(--wy-surface-4-light);--wy-surface-5: var(--wy-surface-5-light);--wy-link: var(--wy-primary-40);--wy-blue: var(--wy-blue-light);--wy-indigo: var(--wy-indigo-light);--wy-purple: var(--wy-purple-light);--wy-pink: var(--wy-pink-light);--wy-red: var(--wy-red-light);--wy-orange: var(--wy-orange-light);--wy-yellow: var(--wy-yellow-light);--wy-green: var(--wy-green-light);--wy-teal: var(--wy-teal-light);--wy-cyan: var(--wy-cyan-light);--wy-gray: var(--wy-gray-light)}:where(.wy-dark:not(.wy-light)){color-scheme:dark;--wy-primary: var(--wy-primary-80);--wy-on-primary: var(--wy-primary-20);--wy-primary-container: var(--wy-primary-30);--wy-on-primary-container: var(--wy-primary-90);--wy-secondary: var(--wy-secondary-80);--wy-on-secondary: var(--wy-secondary-20);--wy-secondary-container: var(--wy-secondary-30);--wy-on-secondary-container: var(--wy-secondary-90);--wy-tertiary: var(--wy-tertiary-80);--wy-on-tertiary: var(--wy-tertiary-20);--wy-tertiary-container: var(--wy-tertiary-30);--wy-on-tertiary-container: var(--wy-tertiary-90);--wy-error: var(--wy-error-80);--wy-on-error: var(--wy-error-20);--wy-error-container: var(--wy-error-30);--wy-on-error-container: var(--wy-error-90);--wy-background: var(--wy-neutral-10);--wy-on-background: var(--wy-neutral-90);--wy-surface: var(--wy-neutral-10);--wy-on-surface: var(--wy-neutral-90);--wy-surface-variant: var(--wy-neutral-variant-30);--wy-on-surface-variant: var(--wy-neutral-variant-80);--wy-outline: var(--wy-neutral-variant-60);--wy-outline-variant: var(--wy-neutral-variant-30);--wy-inverse-surface: var(--wy-neutral-90);--wy-on-inverse-surface: var(--wy-neutral-20);--wy-inverse-primary: var(--wy-primary-40);--wy-surface-1: var(--wy-surface-1-dark);--wy-surface-2: var(--wy-surface-2-dark);--wy-surface-3: var(--wy-surface-3-dark);--wy-surface-4: var(--wy-surface-4-dark);--wy-surface-5: var(--wy-surface-5-dark);--wy-link: var(--wy-primary-80);--wy-blue: var(--wy-blue-dark);--wy-indigo: var(--wy-indigo-dark);--wy-purple: var(--wy-purple-dark);--wy-pink: var(--wy-pink-dark);--wy-red: var(--wy-red-dark);--wy-orange: var(--wy-orange-dark);--wy-yellow: var(--wy-yellow-dark);--wy-green: var(--wy-green-dark);--wy-teal: var(--wy-teal-dark);--wy-cyan: var(--wy-cyan-dark);--wy-gray: var(--wy-gray-dark)}:where(:root,:host>*){--wy-font-family: unset;--wy-font-weight: unset;--wy-line-height: 1.5;--wy-font-size-base: 1rem;--wy-font-size-xxs: calc(.625 * var(--wy-font-size-base));--wy-font-size-xs: calc(.75 * var(--wy-font-size-base));--wy-font-size-sm: calc(.875 * var(--wy-font-size-base));--wy-font-size-lg: calc(1.25 * var(--wy-font-size-base));--wy-headings-font-style: unset;--wy-headings-font-family: var(--wy-font-family);--wy-headings-font-weight: 500;--wy-headings-line-height: var(--wy-line-height);--wy-border-radius: .5rem;--wy-border-radius-sm: calc(.75 * var(--wy-border-radius));--wy-border-radius-lg: calc(1.5 * var(--wy-border-radius));--wy-border-radius-xl: calc(2 * var(--wy-border-radius));--wy-border-radius-pill: 50rem;--wy-link-decoration: none;--wy-link-hover-decoration: null;--wy-table-cell-padding-x: .25rem;--wy-table-cell-padding-y: .25rem;--wy-input-padding-y: .4375rem;--wy-input-padding-x: .75rem;--wy-input-font-family: unset;--wy-input-font-size: var(--wy-font-size-base);--wy-input-font-weight: var(--wy-font-weight);--wy-input-line-height: var(--wy-line-height);--wy-input-border-width: 1px;--wy-input-border-radius: var(--wy-border-radius);--wy-shadow-level0: none;--wy-shadow-level1: 0 0.125rem 0.125rem 0 rgba(0, 0, 0, 0.14), 0 0.1875rem 0.0625rem -0.125rem rgba(0, 0, 0, 0.2), 0 0.0625rem 0.3125rem 0 rgba(0, 0, 0, 0.12);--wy-shadow-level2: 0 0.25rem 0.3125rem 0 rgba(0, 0, 0, 0.14), 0 0.0625rem 0.625rem 0 rgba(0, 0, 0, 0.12), 0 0.125rem 0.25rem -0.0625rem rgba(0, 0, 0, 0.2);--wy-shadow-level3: 0 0.5rem 0.625rem 0.0625rem rgba(0, 0, 0, 0.14), 0 0.1875rem 1.25rem 0.125rem rgba(0, 0, 0, 0.12), 0 0.3125rem 0.3125rem -0.1875rem rgba(0, 0, 0, 0.2);--wy-shadow-level4: 0 1rem 2.25rem 0.125rem rgba(0, 0, 0, 0.14), 0 0.375rem 1.875rem 0.3125rem rgba(0, 0, 0, 0.12), 0 0.5rem 0.625rem -0.3125rem rgba(0, 0, 0, 0.2);--wy-transition-curve: cubic-bezier(0.4, 0, 0.2, 1);--wy-transition-duration: 0.2s;--wy-transition-duration-fast: 0.1s;--wy-transition: var(--wy-transition-duration) var(--wy-transition-curve);--wy-transition-fast: var(--wy-transition-duration-fast) var(--wy-transition-curve);--wy-opacity-backdrop: 95%;--wy-opacity-muted: 38%;--wy-opacity-disabled: 38%;--wy-opacity-state-hover: 8%;--wy-opacity-state-focus: 12%;--wy-opacity-state-active: 12%;--wy-opacity-state-drag: 16%;--wy-surface-1-mix: 5%;--wy-surface-2-mix: 8%;--wy-surface-3-mix: 11%;--wy-surface-4-mix: 12%;--wy-surface-5-mix: 14%;--wy-avatar-font-size: .382em;--wy-avatar-font-weight: 600}:where([class^=wy-],[class*=" wy-"]){box-sizing:border-box}:where([class^=wy-],[class*=" wy-"]) *::before,:where([class^=wy-],[class*=" wy-"]) *::after{box-sizing:inherit}:where([class^=wy-],[class*=" wy-"]):where(a),:where([class^=wy-],[class*=" wy-"]) *:where(a){text-decoration:var(--wy-link-decoration);color:var(--wy-link)}:where([class^=wy-],[class*=" wy-"]):where(a):hover,:where([class^=wy-],[class*=" wy-"]) *:where(a):hover{text-decoration:var(--wy-link-hover-decoration)}:where([class^=wy-],[class*=" wy-"]):where(a):where(:not([href]):not([class])),:where([class^=wy-],[class*=" wy-"]):where(a):where(:not([href]):not([class])):hover,:where([class^=wy-],[class*=" wy-"]) *:where(a):where(:not([href]):not([class])),:where([class^=wy-],[class*=" wy-"]) *:where(a):where(:not([href]):not([class])):hover{text-decoration:none}:where([class^=wy-],[class*=" wy-"]):where(p),:where([class^=wy-],[class*=" wy-"]) *:where(p){margin-top:0;margin-bottom:1rem}:where([class^=wy-],[class*=" wy-"]):where(label),:where([class^=wy-],[class*=" wy-"]) *:where(label){cursor:inherit}:where([class^=wy-],[class*=" wy-"])[hidden],:where([class^=wy-],[class*=" wy-"]) *[hidden]{display:none !important}:where([class^=wy-],[class*=" wy-"]):where([role=button]),:where([class^=wy-],[class*=" wy-"]) *:where([role=button]){cursor:pointer}.wy-alerts{position:fixed;left:0;top:4rem;right:0;pointer-events:none;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1030;gap:1rem}.wy-alert{background:var(--wy-surface-1);color:var(--wy-on-surface);margin:0 0 1rem;gap:.5rem;display:flex;flex-direction:row;flex-wrap:wrap;align-items:baseline;cursor:pointer;border-radius:var(--wy-border-radius);margin-left:auto;margin-right:auto;margin-bottom:1rem;padding:.5rem 1rem;user-select:none;position:relative;overflow:hidden;height:auto;gap:.5rem}.wy-alert.wy-fade{transition:all var(--wy-transition)}.wy-alert.wy-fade:not(.wy-show){opacity:0;height:0;padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0}.wy-alert .wy-text{line-height:1.5;padding:.5rem}.wy-alert .wy-button{margin-left:auto;pointer-events:auto}.wy-alert-primary{background:var(--wy-primary-container);color:var(--wy-on-primary-container)}.wy-filebrowsers{pointer-events:none;width:auto;left:0;top:0;right:0;bottom:0;max-width:none;display:flex;align-items:center;justify-content:center}.wy-filebrowser-frame{pointer-events:all;display:none;width:100%;height:100%;z-index:99999999;position:absolute;top:0;left:0;border:0;background:rgba(0,0,0,.5)}.wy-icon{display:inline-flex;align-items:center;justify-content:center;flex:0 0 auto;position:relative}.wy-icon:not([width]){width:1.5rem}.wy-icon:not([height]){height:1.5rem}.wy-icon-overlay{position:absolute;bottom:0;right:0;background:var(--wy-component-background-color, var(--wy-background));border-radius:50%;border:1px solid var(--wy-component-background-color, var(--wy-background))}.wy-icon-stack{display:inline-flex;position:relative;line-height:1}.wy-icon-stack .wy-icon:last-child{position:absolute;bottom:0;right:0;background-color:var(--wy-component-background-color, var(--wy-background));border-radius:50%}.wy-icon-active-stack{display:inline-flex;position:relative;line-height:1}.wy-icon-active-stack>*{transition:opacity var(--wy-transition);align-self:center;justify-self:center;margin:auto}.wy-icon-active-stack>:last-child{position:absolute;opacity:0}.wy-icon-active-stack.wy-active>:first-child,.wy-active .wy-icon-active-stack>:first-child{opacity:0}.wy-icon-active-stack.wy-active>:last-child,.wy-active .wy-icon-active-stack>:last-child{opacity:1}.wy-icon:not([class*=wy-icon-]):not([class*=wy-kind-]):not([data-icon=progress]) *{fill:currentColor}.wy-content-icon{border-radius:var(--wy-component-border-radius, var(--wy-border-radius-lg));display:flex;align-items:center;justify-content:center;flex-direction:column;text-align:center;padding:1rem 2rem;margin:auto}.wy-content-icon>.wy-icon-stack,.wy-content-icon>.wy-icon{width:4rem;height:4rem}.wy-icon-primary *{fill:var(--wy-primary)}.wy-icon-error *{fill:var(--wy-error)}.wy-icon-blue *{fill:var(--wy-blue)}.wy-icon-indigo *{fill:var(--wy-indigo)}.wy-icon-purple *{fill:var(--wy-purple)}.wy-icon-pink *{fill:var(--wy-pink)}.wy-icon-red *{fill:var(--wy-red)}.wy-icon-orange *{fill:var(--wy-orange)}.wy-icon-yellow *{fill:var(--wy-yellow)}.wy-icon-green *{fill:var(--wy-green)}.wy-icon-teal *{fill:var(--wy-teal)}.wy-icon-cyan *{fill:var(--wy-cyan)}.wy-icon-gray *{fill:var(--wy-gray)}[class*=wy-kind-] *{fill:var(--wy-gray)}.wy-kind-archive *{fill:var(--wy-orange)}.wy-kind-audio *{fill:var(--wy-teal)}.wy-kind-code *{fill:var(--wy-green)}.wy-kind-document *{fill:var(--wy-blue)}.wy-kind-email *{fill:var(--wy-red)}.wy-kind-presentation *{fill:var(--wy-orange)}.wy-kind-spreadsheet *{fill:var(--wy-green)}.wy-kind-image *{fill:var(--wy-pink)}.wy-kind-text *{fill:var(--wy-cyan)}.wy-kind-video *{fill:var(--wy-purple)}.wy-ext-pdf *{fill:var(--wy-red)}[data-icon=progress].wy-icon-primary{color:var(--wy-primary)}[data-icon=progress] :first-child{fill:none;stroke:var(--wy-surface-variant)}[data-icon=progress] :last-child{fill:none;stroke:currentColor}.wy-viewport{position:fixed;top:0;right:0;bottom:0;left:0;z-index:2147483647;pointer-events:none}.wy-overlays{pointer-events:none;width:100%;height:100%;max-width:none;display:flex;align-items:center;justify-content:center;transform-style:preserve-3d;overflow-y:initial;overflow-x:initial;perspective:100rem;perspective-origin:center center}.wy-overlays .wy-panel{background-color:var(--wy-background)}.wy-overlays .wy-panel:not(.wy-transition){transform:translateZ(-4rem) !important}.wy-overlays .wy-panel .wy-controls{position:absolute;border-bottom:none;flex-direction:row;transition:opacity .1s .2s step-end}.wy-overlays .wy-panel .wy-controls .wy-icon{color:var(--wy-on-surface)}.wy-overlays .wy-panel.wy-loaded .wy-controls{pointer-events:none;opacity:0}.wy-overlays .wy-panel .wy-panel-frame{background-color:rgba(0,0,0,0)}@media(min-width: 768px){.wy-overlays .wy-panel.wy-modal{left:auto;right:auto;top:2rem;bottom:3.2rem;margin-left:4rem;margin-top:auto;margin-right:4rem;margin-bottom:auto;border-radius:var(--wy-border-radius);box-shadow:var(--wy-shadow-level4);width:32rem;max-height:32rem}.wy-overlays .wy-panel.wy-modal:not(.wy-scroll-y){overflow:hidden}}@media(min-width: 768px){.wy-overlays .wy-panel.wy-modal-full{left:1rem;top:1rem;right:1rem;bottom:1rem;margin:0;border-radius:var(--wy-border-radius);box-shadow:var(--wy-shadow-level4);width:auto;max-height:none}.wy-overlays .wy-panel.wy-modal-full:not(.wy-scroll-y){overflow:hidden}}.wy-overlays .wy-panel.wy-loading .wy-controls{transition:opacity var(--wy-transition);opacity:1}.wy-panels{position:absolute;top:0;right:0;bottom:0;left:0;overscroll-behavior:contain;overflow-y:auto;overflow-x:hidden}.wy-panel{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;overflow:hidden;background-color:var(--wy-background);display:flex;flex-direction:column}.wy-panel .wy-controls{top:.25rem;left:.25rem;min-width:2.5rem;width:auto;display:flex;z-index:10000;order:-1;flex-direction:row-reverse;border-bottom:1px solid var(--wy-outline-variant)}.wy-panel .wy-controls:empty{display:none}.wy-panel .wy-controls .wy-icon{color:var(--wy-on-background)}.wy-panel .wy-panel-frame{transition:opacity var(--wy-transition-fast);transition-delay:.2s;opacity:1}.wy-panel .wy-panel-frame:not([src]){display:none}.wy-panel:not(.wy-loaded) .wy-panel-frame{opacity:0;transition:opacity .2s step-start;transition-delay:.1s}.wy-panel.wy-open{pointer-events:all;z-index:5}.wy-panel.wy-open[data-title]::before{content:attr(data-title);position:absolute;top:0;left:0;right:0;height:3rem;padding:.25rem;opacity:0;pointer-events:none;display:flex;align-items:center;justify-content:center;transition:opacity .1s step-end;transition-delay:.2s;font-family:var(--wy-font-family),inherit;line-height:var(--wy-line-height);font-weight:var(--wy-font-weight);background-color:var(--wy-surface-1);color:var(--wy-on-surface);box-shadow:var(--wy-outline-variant) 0px -1px 0px 0px inset;backface-visibility:hidden}@supports(backdrop-filter: blur(0.5rem)){.wy-panel.wy-open[data-title]::before{backdrop-filter:blur(0.5rem)}}.wy-panel.wy-open::after{content:"";position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;opacity:0;transition:opacity var(--wy-transition);transition-duration:0s}.wy-panel.wy-open.wy-loading[data-title]::before{opacity:1}.wy-panel.wy-open.wy-loading::after{transition:opacity var(--wy-transition);transition-duration:.5s;opacity:1;background-image:url(${d});background-repeat:no-repeat;background-position:50%;background-size:2rem;background-color:rgba(0,0,0,0)}.wy-panel{opacity:0;visibility:hidden;transition:opacity var(--wy-transition-fast) .01s,transform var(--wy-transition-fast) .01s,visibility .01s step-end var(--wy-transition-duration-fast)}.wy-panel.wy-open{transition:opacity var(--wy-transition),transform var(--wy-transition),visibility var(--wy-transition-duration) step-start;visibility:visible}.wy-panel.wy-open.wy-transition{opacity:1;transform:none}.wy-panel-frame{flex:1 1 100%;border:0}:where(:root,:host>*){--wy-btn-padding-x: 1.5rem;--wy-btn-padding-y: .5rem;--wy-btn-font-family: var(--wy-font-family);--wy-btn-font-size: var(--wy-font-size-base);--wy-btn-font-weight: 400;--wy-btn-line-height: var(--wy-line-height);--wy-btn-border-width: 0;--wy-btn-border-color: transparent;--wy-btn-border-radius: 1.25rem}.wy-button{--wy-component-color: var(--wy-primary);color:var(--wy-component-color);background:var(--wy-component-background-color, transparent);padding:var(--wy-btn-padding-y) var(--wy-btn-padding-x);font-family:var(--wy-btn-font-family),inherit;font-size:var(--wy-btn-font-size);font-weight:var(--wy-btn-font-weight);line-height:var(--wy-btn-line-height);text-align:center;text-decoration:none;vertical-align:middle;cursor:pointer;user-select:none;border:var(--wy-btn-border-width) solid var(--wy-btn-border-color);border-radius:var(--wy-btn-border-radius);display:inline-flex;align-items:center;justify-content:center;gap:.25rem;position:relative}.wy-button:not(.wy-button-link,:disabled)>*{z-index:3}.wy-button:not(.wy-button-link,:disabled)::before{content:"";z-index:2;position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit;background:var(--wy-component-color);opacity:0%}.wy-button:not(.wy-button-link,:disabled):hover::before{opacity:8%}.wy-button:not(.wy-button-link,:disabled):focus::before,.wy-button:not(.wy-button-link,:disabled):active::before,.wy-button:not(.wy-button-link,:disabled).wy-active::before{opacity:12%}.wy-button:not(.wy-button-icon) .wy-icon:first-child{margin-left:-0.5rem}.wy-button:not(.wy-button-icon) .wy-icon:last-child{margin-right:-0.5rem}.wy-button:disabled{opacity:var(--wy-opacity-disabled);cursor:unset;pointer-events:none}.wy-button-icon{--wy-component-color: var(--wy-on-surface-variant);width:2.5rem;height:2.5rem;padding:.5rem;line-height:1;border-radius:var(--wy-border-radius-pill);border-width:0;align-items:center;justify-content:center}.wy-button-icon.wy-active{--wy-component-color: var(--wy-primary)}.wy-button-primary{--wy-component-background-color: var(--wy-primary);--wy-component-color: var(--wy-on-primary)}.wy-button-variant{--wy-component-background-color: var(--wy-surface-variant);--wy-component-color: var(--wy-on-surface-variant)}.wy-button-primary-text{--wy-component-color: var(--wy-primary)}.wy-button-link{padding:0;color:var(--wy-link-color, var(--wy-primary));text-decoration:var(--wy-link-decoration, var(--wy-link-decoration))}.wy-button-link:hover,.wy-button-link:focus{text-decoration:var(--wy-link-hover-decoration, var(--wy-link-hover-decoration))}.wy-buttons{display:flex;align-items:center;flex-wrap:wrap;gap:.5rem}.wy-container{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;font-family:var(--wy-font-family),inherit;font-size:1rem;line-height:1.5rem;position:relative;display:flex;flex-direction:column;align-self:stretch;flex:1 1 100%;height:100%;align-items:flex-start;justify-content:flex-start}.wy-container.wy-viewport{position:fixed;z-index:2147483647}.wy-container:not(.wy-viewport)>*{pointer-events:auto}.wy-container iframe{border:none}.wy-alert{box-shadow:var(--wy-shadow-level1)}`,""]);const w=h.toString()},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var h=[].concat(e[c]);r&&s[h[0]]||(void 0!==a&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=a),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),i&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=i):h[4]="".concat(i)),t.push(h))}},t}},667:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},81:e=>{e.exports=function(e){return e[1]}},911:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(212),i=n(631),a=n(945),s=n(242),o=n(690);const l=new a.Z("DOM root");class c extends s.Z{static defaults={shadowMode:"closed"};static supportsShadowDOM=!!HTMLElement.prototype.attachShadow;#e;static globalStyleSheet;get console(){return l}root;dom;container;#t="";get className(){return this.#t}set className(e){this.#t=e,this.updateClassName()}static registerCustomElements(){if(!c.globalStyleSheet){if("customElements"in window)try{window.customElements.define("weavy-root",HTMLElement.prototype),window.customElements.define("weavy-container",HTMLDivElement.prototype)}catch(e){}c.globalStyleSheet=(0,o.dS)(i.Z),(0,o.MC)(document,c.globalStyleSheet)}}constructor(e){super(),e&&(this.eventParent=e),c.registerCustomElements(),this.root=document.createElement("weavy-root"),this.container=document.createElement("weavy-container"),this.container.className="wy-container",this.triggerEvent("before:root-create",this),"open"===c.defaults.shadowMode&&l.warn(this.id,"Using ShadowDOM in open mode",this.id),this.dom=this.root.attachShadow({mode:c.defaults.shadowMode||"closed"}),this.dom.appendChild(this.container),this.updateClassName(),this.#e=(0,o.dS)(r.Z),(0,o.MC)(this.dom,this.#e),this.triggerEvent("on:root-create",this),queueMicrotask((()=>this.triggerEvent("after:root-create",this)))}updateClassName(){this.container&&(this.container.className=["wy-container",this.#t].filter((e=>e)).join(" "))}remove(){this.triggerEvent("before:root-remove",this),this.root&&(this.root.remove(),this.root=null),this.triggerEvent("on:root-remove",this),this.triggerEvent("after:root-remove",this)}}},252:(e,t,n)=>{n.d(t,{Z:()=>L});var r=n(935);const i={method:"POST",mode:"cors",cache:"reload",credentials:"include",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},redirect:"manual",referrerPolicy:"no-referrer-when-downgrade"};function a(e,t){if(!(t instanceof HTMLElement||t instanceof Node))return t}function s(e,t){if((0,r.PO)(e)){const n={};return Object.keys(e).forEach((function(r){n[function(e,t){return(e=t?e[0].toUpperCase()+e.substring(1):e[0].toLowerCase()+e.substring(1)).replace(/([-_][a-z])/gi,(function(e){return e.toUpperCase().replace("-","").replace("_","")}))}(r,t)]=s(e[r],t)})),n}return Array.isArray(e)?e.map((function(e){return s(e,t)})):e}async function o(e){if(e){let t=(e.headers.has("content-type")?e.headers.get("content-type"):"").split(";")[0];if(e.ok){if("application/json"===t)try{return s(await e.json())}catch(e){return null}return e}if(t.match(/json$/i))try{let t=s(await e.json()),n=t.detail||t.title||t.message||e.statusText||t.status;if(n)throw new Error(n)}catch(e){}throw new Error(e.statusText)}}var l=n(558),c=n(318),h=n(945),d=n(242);class w{#n;#r;constructor(e){this.#n=e,this.#r=new Map}get(e){var t=!1,n=(e=e&&String(e))&&/^(https?:\/(\/[^/]+)+)\/?$/.exec(e);if(n&&(t=window.location.origin===n[1],e=n[1]),e=(t?"":e)||"",this.#r.has(e))return this.#r.get(e);var r=new this.#n(e);return this.#r.set(e,r),r}remove(e){e=e&&String(e)||"";try{var t=this.#r.get(e);t&&"function"==typeof t.destroy&&t.destroy(),this.#r.delete(e)}catch(t){console.error("Could not remove instance",e,t)}}}var y=n(583);var u=new h.Z("WeavyAuthentication");class p extends d.Z{#i=!1;#a=!1;get console(){return u}get isInitialized(){return!0===this.#a}#s=new URL(window.location.origin+"/");get url(){return this.#s}#o=null;get user(){return this.#o}#l=null;get isAuthenticated(){return!0===this.#l}get isProvided(){return!!this.#c}#h=new c.Z;whenAuthenticated(){return this.#h()}get isAuthorized(){return this.#d(this.#o)}#w=new c.Z;whenAuthorized(){return this.#w()}#y=new c.Z;#u=!1;#p;#c;#g=!1;#m=new c.Z;constructor(e){super(),u.debug("Create new weavy authentication",e),this.#s=new URL(e),y.Z.on("authenticate",(()=>this.checkUserState()))}#d(e){return e&&e.id&&-1!==e.id||!1}setTokenFactory(e){u.debug("Configuring token factory"),this.#p=null,this.#c=e,this.#g=!1,this.#m.reset()}getAccessToken(e){if("pending"!==this.#m.state()&&e&&(this.#m.reset(),this.#g=!1),!1===this.#g){if(u.debug("Requesting new token"),this.#g=!0,"function"!=typeof this.#c)throw new Error("The token factory should be an async function returning a string.");var t=this.#c(e);if("function"!=typeof t.then)throw new Error("The token factory is not an async function.");t.then((e=>{if("string"!=typeof e||!e)throw new Error("The async token factory should return a string token.");this.#p=e,this.#m.resolve(this.#p)}),(e=>{throw new Error("Failed to get token from the async token factory:",e)}))}return this.#m()}clearTokenFactory(){u.debug("clearing access token and token factory"),this.#p=null,this.#c=null,this.#g=!1,this.#m.reset()}init(e){return(null===this.#l||e&&e!==this.#c)&&("function"==typeof e&&this.setTokenFactory(e),void 0!==this.#c?(u.debug("authenticate using token factory"),this.#f()):this.checkUserState()),this.#a||(this.#a=!0,u.debug("initialized")),this.#h()}#v(e){e&&e.id?(this.#o&&e&&this.#o.id!==e.id&&u.debug("setUser",e.id),this.#o=e,this.#l=!0,this.#d(e)?this.#w.resolve():("pending"!==this.#w.state()&&this.#w.reset(),this.#u=!1,this.#y.resolve()),this.#h.resolve(e)):(this.#o=null,this.#l=!1,this.#w.reset())}signIn(){return"pending"!==this.#h.state()&&this.#h.reset(),"pending"!==this.#w.state()&&this.#w.reset(),this.#f(),this.#h()}signOut(e){var t=new URL("/dropin/client/logout",this.url);return this.#u=!0,e&&this.clearTokenFactory(),this.triggerEvent("clear-user"),window.fetch(t.toString(),i).catch((()=>{u.warn("signOut request fail")})).finally((()=>{u.debug("signout ajax -> processing user"),this.#b({id:-1})})),this.#y()}#b(e){var t="updated";e&&e.id?(this.#l&&(this.#d(this.#o)?e&&-1===e.id?(u.info("signed-out"),t="signed-out"):e&&e.id!==this.#o.id&&(u.info("changed-user"),t="changed-user"):e&&-1!==e.id&&(u.info("signed-in"),t="signed-in")),this.#v(e),this.triggerEvent("user",{state:t,authorized:this.#d(e),user:e})):(this.#v(null),this.triggerEvent("clear-user"),this.triggerEvent("user",{state:"user-error",authorized:!1,user:e})),this.#i=!1}checkUserState(){if(!this.#i){this.#i=!0,u.debug("checkUserState"+(void 0!==this.#c?":token":":cookie")),"pending"!==this.#h.state()&&this.#h.reset(),"pending"!==this.#w.state()&&this.#w.reset();var e=new URL("/dropin/client/user",this.url),t=Object.assign({},i);this.getAccessToken().then((n=>{if("string"!=typeof n)return Promise.reject(new Error("Provided access token is invalid."));t.body=JSON.stringify({access_token:n}),window.fetch(e,t).then((n=>401===n.status&&void 0!==this.#c?(u.warn("access token validation failed, trying again"),this.getAccessToken(!0).then((n=>(t.body=JSON.stringify({access_token:n}),window.fetch(e,t))))):n)).then(o).then((e=>{u.debug("checkUserState fetch -> processing user"),this.#b(e)}),(()=>{u.warn("checkUserState request fail"),u.debug("checkUserState fetch fail -> processing user"),this.#b({id:null})}))}))}return this.#h()}#f(){var e=new c.Z,t=new URL("/dropin/client/login",this.url);if(this.#u)return this.#y.then((()=>this.validateAccessToken()));"pending"!==this.#y.state()&&this.#y.reset(),u.debug("validating access token"),this.triggerEvent("signing-in");var n=Object.assign({},i);return this.getAccessToken().then((r=>r&&"string"==typeof r?(n.headers.Authorization="Bearer "+r,window.fetch(t.toString(),n).then((e=>401===e.status?(u.warn("access token validation failed, trying again"),this.getAccessToken(!0).then((e=>(n.headers.Authorization="Bearer "+e,window.fetch(t.toString(),n))))):e)).then(o).then((t=>(this.#b(t),e.resolve(t)))).catch((e=>{u.error("sign in with access token failed.",e.message),this.triggerEvent("authentication-error",{method:"access_token",status:401,message:e.message}),this.#b({id:null})}))):Promise.reject(new Error("Provided access token is invalid."))))}destroy(){this.#l=null,this.#o=null,this.clearTokenFactory(),this.clear(),this.#a=!1}}const g=new w(p);var m=n(773),f=n(216),v=n(911),b=n(690);const k=new h.Z("Dialog");class _{root;#k;#_;options={className:"wy-alert wy-fade",containerClassName:"wy-alerts"};get console(){return k}constructor(e,t){this.root=e,t&&(this.options=t),this.#_=new b.ZP(document.body),this.#_.on("styles-update",(async()=>{k.log("updating dialog styles");for(const e in this.#_.styleSheets){let t=this.#_.styleSheets[e];(0,b.MC)(this.root.dom,t)}})),this.#k=document.createElement("div"),this.root.container.classList.add("wy-viewport"),this.#k.className=this.options.containerClassName,this.root.container.appendChild(this.#k)}message(e,t){var n=document.createElement("div");return n.className=this.options.className,e instanceof HTMLElement||e instanceof DocumentFragment?n.appendChild(e):n.innerHTML=e,this.displayMessage(n,t),k.log("Dialog:",n.innerText),n}displayMessage(e,t){t||((0,f.W)(5e3).then((()=>{e.classList.remove("wy-show")})),(0,f.W)(5200).then((()=>{e.remove()}))),(0,f.W)(1).then((()=>{e.classList.add("wy-show")})),this.#k.appendChild(e)}}const I=new h.Z("Status");var C=null;function E(e){var t,n,r,i,a=new URL("/dropin/client/ping",e.url),s="hasStorageAccess"in document,o=new c.Z,h=new c.Z,d=new c.Z,w=new c.Z,u=(0,f.W)(3e3);if(!C){I.log("Frame Check: Started..."),(C=document.createElement("iframe")).className="wy-status-check",C.hidden=!0,C.id=e.getId("status-check"),C.setAttribute("name",e.getId("status-check")),n||(n=new v.Z,document.documentElement.append(n.root)),t??=new _(n);return y.Z.on("user-status",{weavyId:e.getId(),windowName:e.getId("status-check")},(n=>{var a=parseInt(n.id)===parseInt(e.authentication.user.id);I.debug("Frame Check: user-status received",a),o.resolve(a),a?h.resolve():s?(()=>{u.cancel();var n,a=(0,l.yq)('<div class="wy-text">Third party cookies are required to use collaborative features on this page.</div>'),s=(0,l.yq)('<button class="wy-button">Enable cookies</button>');s.onclick=()=>{I.log("Frame Check: Opening storage access request"),n=window.open(new URL("/dropin/client/cookie-access",e.url),e.getId("storage-access")),y.Z.registerContentWindow(n,e.getId("storage-access"),e.getId(),e.url.origin)};var o=document.createElement("template").content;o.append(a,s),i=t.message(o,!0),y.Z.one("storage-access-granted",{weavyId:!0,domain:e.url.origin},(()=>{I.log("Frame Check: Storage access was granted, authenticating and reloading status check."),r&&(r.remove(),r=null),i&&(i.remove(),i=null);let t=e.getId();e.authentication.signIn().then((()=>{I.debug("Frame Check: reloading status check"),y.Z.postToFrame(e.getId("status-check"),t,{name:"reload"})}))}))})():s||(I.error("Allow third party cookies to use collaborative features on this page."),r=t.message("Allow third party cookies to use collaborative features on this page."))})),y.Z.one("ready",{weavyId:e.getId(),windowName:e.getId("status-check")},(()=>{I.debug("Frame Check: frame ready"),w.resolve()})),u.then((()=>{e.fetch(a).then((t=>{if(I.warn("Status check timeout. Please make sure your web server is properly configured."),!t.ok)return Promise.reject(new Error("Error fetching status url: "+t.statusText));if(t.headers.has("X-Frame-Options")){let e=t.headers.get("X-Frame-Options");if("DENY"===e||"SAMEORIGIN"===e&&a.origin!==window.location.origin)return Promise.reject(new Error("Frames are blocked by header X-Frame-Options"))}if(t.headers.has("Content-Security-Policy")){let n=t.headers.get("Content-Security-Policy").split(";").filter((e=>0===e.indexOf("frame-ancestors"))).pop();if(n){let t=n.split(" ");if(t.splice(0,1),!t.filter((t=>"'self'"===t&&e.url.origin===window.location.origin||(t.indexOf("*")?window.location.origin.endsWith(t.split("*").pop()):t===window.location.origin))).length)return Promise.reject(new Error("Frames blocked by header Content-Security-Policy: frame-ancestors"))}}})).catch((e=>{I.error("Frame status error detected: "+e.message)}))})),document.documentElement.appendChild(C),(0,f.W)(1).then((()=>{C.src=a.href,e.isBlocked=!0;try{y.Z.registerContentWindow(C.contentWindow,e.getId("status-check"),e.getId(),e.url.origin)}catch(t){I.warn("Frame postMessage is blocked",t),e.triggerEvent("frame-check",{blocked:!0})}})),Promise.all([w(),h()]).then((()=>(I.log("Frame Check:","OK"),e.isBlocked=!1,u.cancel(),r&&(r.remove(),r=null),i&&(i.remove(),i=null),e.triggerEvent("frame-check",{blocked:!1}),d.resolve({blocked:!1}),d()))).catch((t=>(e.triggerEvent("frame-check",{blocked:!0}),d.reject(new Error("Frame check failed: "+t.message)),d())))}}const M=new h.Z("BrowserHistory");function S(e){var t=(0,r.f0)({},window.history.state,!0);return t.weavy??={},t.weavy[e]??={},t.weavy[e]}const x=new h.Z("WeavyEnvironment");class A extends d.Z{#s;#I;#C;options={};data={};origins=new Set;get url(){return this.#s}get console(){return x}getId(e){return e?this.removeId(e)+"__"+this.#C:this.#C}removeId(e){return e?String(e).replace(new RegExp("__"+this.getId()+"$"),""):e}get authentication(){return this.#I}#E=!1;#M=!1;#S=new c.Z;#x=new c.Z;async whenReady(){await this.authentication.whenAuthorized(),await this.#x(),await this.#S()}constructor(e){super(),this.#s=new URL(e),this.origins.add(this.#s.origin),this.#C=(0,m.O)(),this.#I=g.get(e),this.authentication.whenAuthenticated().then((()=>{(0,l.Cd)((()=>{E(this).then((()=>{this.#x.resolve()}))}))})),window.addEventListener("popstate",(()=>this.restoreHistory())),setTimeout((()=>this.restoreHistory()),0)}restoreHistory(){var e=S(this.#s.origin);return e&&(x.debug("history restore",e),this.triggerEvent("history-restore",e)),e}setHistory(e,t){var n=S(this.#s.origin),i={state:t,action:e||"push",url:window.location.href,currentStates:n};return!1!==(i=this.triggerEvent("before:history",i))&&(t.id?i.currentStates[t.id]=t:x.error("Browser state has no id"),!1!==(i=this.triggerEvent("on:history",i))&&(x.debug("history: "+i.action+" history state"),function(e,t,n,i){if(t){M.debug((n||"setting")+" browser state",t);var a=(0,r.f0)({},window.history.state,!0);a.weavy??={},a.weavy[e]=t,i=i&&String(i)||window.location.href;try{"replace"===n?window.history.replaceState(a,null,i):window.history.pushState(a,null,i)}catch(e){M.warn("history: Could not push history state.",e,t)}}}(this.#s.origin,i.currentStates,i.action,i.url),this.triggerEvent("after:history",i))),i.state}async configure(e){this.options=(0,r.f0)(this.options,e,!0),e.defaults?.filebrowser&&this.origins.add(new URL(e.defaults.filebrowser).origin),e.tokenFactory&&(async()=>{if(!this.#I.isProvided||!this.#I.isInitialized){if(void 0===this.options.tokenFactory&&!this.#I.isProvided)throw new Error("specify an async token factory in your options");this.#I.init(this.options.tokenFactory),this.#I.on("user",(e=>{/^signed-in|signed-out|changed-user|user-error$/.test(e.state)&&("changed-user"===e.state?(this.triggerEvent("signed-out",{id:-1}),this.triggerEvent("signed-in",e)):this.triggerEvent(e.state,e))}))}})(),this.#E||(this.#E=!0,this.#M=!0,this.#S.reset(),queueMicrotask((async()=>{if(this.#E&&this.url){this.#E=!1;const t=new URL("/dropin/client/init",this.url);let n={};this.options.lang&&(n.lang=this.options.lang),this.options.tz&&(n.tz=this.options.tz),this.options.version&&(n.version=this.options.version),x.log("init",n);var e=await this.fetch(t,n,"POST",null,!0);if(this.#M=!1,!e)throw new Error("Error loading client data");this.data=e,this.#S.resolve()}}))),await Promise.all([this.authentication.whenAuthenticated(),this.#S()])}async fetch(e,t,n,s){e=new URL(e,this.url),n=n||"GET",t=t&&"string"==typeof t&&t||"GET"!==n&&t&&JSON.stringify(t,a)||t||"";var l=!("GET"===n&&!t);if(!(e.origin===this.url.origin))throw new Error("fetch: Only requests to the weavy environment are allowed.");let c=(0,r.f0)(i,{method:n,cache:l?"no-cache":"default"},!0);if(s=(0,r.f0)(c,s,!0),t&&"GET"!==n)s.body=t;else if(t){let n=new URLSearchParams(t);e.search=(e.search?e.search+"&":"")+n.toString()}await this.#I.whenAuthenticated();let h=await this.#I.getAccessToken();if("string"!=typeof h)throw new Error("fetch: Provided access token is empty!");s.headers.Authorization="Bearer "+h;let d=await window.fetch(e.toString(),s);if(400===d.status||401===d.status||403===d.status){x.warn("fetch: access token failed, trying again");let t=await this.#I.getAccessToken(!0);s.headers.Authorization="Bearer "+t,d=await window.fetch(e.toString(),s)}return o(d)}}const L=new w(A)},690:(e,t,n)=>{
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function r(e){return e<0?-1:0===e?0:1}function i(e,t,n){return(1-n)*e+n*t}function a(e){return(e%=360)<0&&(e+=360),e}function s(e,t){return[e[0]*t[0][0]+e[1]*t[0][1]+e[2]*t[0][2],e[0]*t[1][0]+e[1]*t[1][1]+e[2]*t[1][2],e[0]*t[2][0]+e[1]*t[2][1]+e[2]*t[2][2]]}n.d(t,{MC:()=>R,dS:()=>W,ZP:()=>F,aJ:()=>N});
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const o=[[.41233895,.35762064,.18051042],[.2126,.7152,.0722],[.01932141,.11916382,.95034478]],l=[[3.2413774792388685,-1.5376652402851851,-.49885366846268053],[-.9691452513005321,1.8758853451067872,.04156585616912061],[.05562093689691305,-.20395524564742123,1.0571799111220335]],c=[95.047,100,108.883];function h(e,t,n){return(255<<24|(255&e)<<16|(255&t)<<8|255&n)>>>0}function d(e){return h(v(e[0]),v(e[1]),v(e[2]))}function w(e){return e>>16&255}function y(e){return e>>8&255}function u(e){return 255&e}function p(e,t,n){const r=l,i=r[0][0]*e+r[0][1]*t+r[0][2]*n,a=r[1][0]*e+r[1][1]*t+r[1][2]*n,s=r[2][0]*e+r[2][1]*t+r[2][2]*n;return h(v(i),v(a),v(s))}function g(e){const t=function(e){return s([f(w(e)),f(y(e)),f(u(e))],o)}(e)[1];return 116*b(t/100)-16}function m(e){return 100*k((e+16)/116)}function f(e){const t=e/255;return t<=.040449936?t/12.92*100:100*Math.pow((t+.055)/1.055,2.4)}function v(e){const t=e/100;let n=0;return n=t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,r=0,i=255,(a=Math.round(255*n))<r?r:a>i?i:a;var r,i,a}function b(e){return e>216/24389?Math.pow(e,1/3):(903.2962962962963*e+16)/116}function k(e){const t=e*e*e;return t>216/24389?t:(116*e-16)/903.2962962962963}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class _{constructor(e,t,n,r,i,a,s,o,l,c){this.n=e,this.aw=t,this.nbb=n,this.ncb=r,this.c=i,this.nc=a,this.rgbD=s,this.fl=o,this.fLRoot=l,this.z=c}static make(e=function(){return c}(),t=200/Math.PI*m(50)/100,n=50,r=2,a=!1){const s=e,o=.401288*s[0]+.650173*s[1]+-.051461*s[2],l=-.250268*s[0]+1.204414*s[1]+.045854*s[2],h=-.002079*s[0]+.048952*s[1]+.953127*s[2],d=.8+r/10,w=d>=.9?i(.59,.69,10*(d-.9)):i(.525,.59,10*(d-.8));let y=a?1:d*(1-1/3.6*Math.exp((-t-42)/92));y=y>1?1:y<0?0:y;const u=d,p=[y*(100/o)+1-y,y*(100/l)+1-y,y*(100/h)+1-y],g=1/(5*t+1),f=g*g*g*g,v=1-f,b=f*t+.1*v*v*Math.cbrt(5*t),k=m(n)/e[1],I=1.48+Math.sqrt(k),C=.725/Math.pow(k,.2),E=C,M=[Math.pow(b*p[0]*o/100,.42),Math.pow(b*p[1]*l/100,.42),Math.pow(b*p[2]*h/100,.42)],S=[400*M[0]/(M[0]+27.13),400*M[1]/(M[1]+27.13),400*M[2]/(M[2]+27.13)];return new _(k,(2*S[0]+S[1]+.05*S[2])*C,C,E,w,u,p,b,Math.pow(b,.25),I)}}_.DEFAULT=_.make();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class I{constructor(e,t,n,r,i,a,s,o,l){this.hue=e,this.chroma=t,this.j=n,this.q=r,this.m=i,this.s=a,this.jstar=s,this.astar=o,this.bstar=l}distance(e){const t=this.jstar-e.jstar,n=this.astar-e.astar,r=this.bstar-e.bstar,i=Math.sqrt(t*t+n*n+r*r);return 1.41*Math.pow(i,.63)}static fromInt(e){return I.fromIntInViewingConditions(e,_.DEFAULT)}static fromIntInViewingConditions(e,t){const n=(65280&e)>>8,i=255&e,a=f((16711680&e)>>16),s=f(n),o=f(i),l=.41233895*a+.35762064*s+.18051042*o,c=.2126*a+.7152*s+.0722*o,h=.01932141*a+.11916382*s+.95034478*o,d=.401288*l+.650173*c-.051461*h,w=-.250268*l+1.204414*c+.045854*h,y=-.002079*l+.048952*c+.953127*h,u=t.rgbD[0]*d,p=t.rgbD[1]*w,g=t.rgbD[2]*y,m=Math.pow(t.fl*Math.abs(u)/100,.42),v=Math.pow(t.fl*Math.abs(p)/100,.42),b=Math.pow(t.fl*Math.abs(g)/100,.42),k=400*r(u)*m/(m+27.13),_=400*r(p)*v/(v+27.13),C=400*r(g)*b/(b+27.13),E=(11*k+-12*_+C)/11,M=(k+_-2*C)/9,S=(20*k+20*_+21*C)/20,x=(40*k+20*_+C)/20,A=180*Math.atan2(M,E)/Math.PI,L=A<0?A+360:A>=360?A-360:A,O=L*Math.PI/180,T=x*t.nbb,R=100*Math.pow(T/t.aw,t.c*t.z),W=4/t.c*Math.sqrt(R/100)*(t.aw+4)*t.fLRoot,P=L<20.14?L+360:L,N=5e4/13*(.25*(Math.cos(P*Math.PI/180+2)+3.8))*t.nc*t.ncb*Math.sqrt(E*E+M*M)/(S+.305),F=Math.pow(N,.9)*Math.pow(1.64-Math.pow(.29,t.n),.73),U=F*Math.sqrt(R/100),z=U*t.fLRoot,B=50*Math.sqrt(F*t.c/(t.aw+4)),Z=(1+100*.007)*R/(1+.007*R),D=1/.0228*Math.log(1+.0228*z),q=D*Math.cos(O),H=D*Math.sin(O);return new I(L,U,R,W,z,B,Z,q,H)}static fromJch(e,t,n){return I.fromJchInViewingConditions(e,t,n,_.DEFAULT)}static fromJchInViewingConditions(e,t,n,r){const i=4/r.c*Math.sqrt(e/100)*(r.aw+4)*r.fLRoot,a=t*r.fLRoot,s=t/Math.sqrt(e/100),o=50*Math.sqrt(s*r.c/(r.aw+4)),l=n*Math.PI/180,c=(1+100*.007)*e/(1+.007*e),h=1/.0228*Math.log(1+.0228*a),d=h*Math.cos(l),w=h*Math.sin(l);return new I(n,t,e,i,a,o,c,d,w)}static fromUcs(e,t,n){return I.fromUcsInViewingConditions(e,t,n,_.DEFAULT)}static fromUcsInViewingConditions(e,t,n,r){const i=t,a=n,s=Math.sqrt(i*i+a*a),o=(Math.exp(.0228*s)-1)/.0228/r.fLRoot;let l=Math.atan2(a,i)*(180/Math.PI);l<0&&(l+=360);const c=e/(1-.007*(e-100));return I.fromJchInViewingConditions(c,o,l,r)}toInt(){return this.viewed(_.DEFAULT)}viewed(e){const t=0===this.chroma||0===this.j?0:this.chroma/Math.sqrt(this.j/100),n=Math.pow(t/Math.pow(1.64-Math.pow(.29,e.n),.73),1/.9),i=this.hue*Math.PI/180,a=.25*(Math.cos(i+2)+3.8),s=e.aw*Math.pow(this.j/100,1/e.c/e.z),o=a*(5e4/13)*e.nc*e.ncb,l=s/e.nbb,c=Math.sin(i),h=Math.cos(i),d=23*(l+.305)*n/(23*o+11*n*h+108*n*c),w=d*h,y=d*c,u=(460*l+451*w+288*y)/1403,g=(460*l-891*w-261*y)/1403,m=(460*l-220*w-6300*y)/1403,f=Math.max(0,27.13*Math.abs(u)/(400-Math.abs(u))),v=r(u)*(100/e.fl)*Math.pow(f,1/.42),b=Math.max(0,27.13*Math.abs(g)/(400-Math.abs(g))),k=r(g)*(100/e.fl)*Math.pow(b,1/.42),_=Math.max(0,27.13*Math.abs(m)/(400-Math.abs(m))),I=r(m)*(100/e.fl)*Math.pow(_,1/.42),C=v/e.rgbD[0],E=k/e.rgbD[1],M=I/e.rgbD[2];return p(1.86206786*C-1.01125463*E+.14918677*M,.38752654*C+.62144744*E-.00897398*M,-.0158415*C-.03412294*E+1.04996444*M)}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class C{static sanitizeRadians(e){return(e+8*Math.PI)%(2*Math.PI)}static trueDelinearized(e){const t=e/100;let n=0;return n=t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,255*n}static chromaticAdaptation(e){const t=Math.pow(Math.abs(e),.42);return 400*r(e)*t/(t+27.13)}static hueOf(e){const t=s(e,C.SCALED_DISCOUNT_FROM_LINRGB),n=C.chromaticAdaptation(t[0]),r=C.chromaticAdaptation(t[1]),i=C.chromaticAdaptation(t[2]),a=(11*n+-12*r+i)/11,o=(n+r-2*i)/9;return Math.atan2(o,a)}static areInCyclicOrder(e,t,n){return C.sanitizeRadians(t-e)<C.sanitizeRadians(n-e)}static intercept(e,t,n){return(t-e)/(n-e)}static lerpPoint(e,t,n){return[e[0]+(n[0]-e[0])*t,e[1]+(n[1]-e[1])*t,e[2]+(n[2]-e[2])*t]}static setCoordinate(e,t,n,r){const i=C.intercept(e[r],t,n[r]);return C.lerpPoint(e,i,n)}static isBounded(e){return 0<=e&&e<=100}static nthVertex(e,t){const n=C.Y_FROM_LINRGB[0],r=C.Y_FROM_LINRGB[1],i=C.Y_FROM_LINRGB[2],a=t%4<=1?0:100,s=t%2==0?0:100;if(t<4){const t=a,o=s,l=(e-t*r-o*i)/n;return C.isBounded(l)?[l,t,o]:[-1,-1,-1]}if(t<8){const t=a,o=s,l=(e-o*n-t*i)/r;return C.isBounded(l)?[o,l,t]:[-1,-1,-1]}{const t=a,o=s,l=(e-t*n-o*r)/i;return C.isBounded(l)?[t,o,l]:[-1,-1,-1]}}static bisectToSegment(e,t){let n=[-1,-1,-1],r=n,i=0,a=0,s=!1,o=!0;for(let l=0;l<12;l++){const c=C.nthVertex(e,l);if(c[0]<0)continue;const h=C.hueOf(c);s?(o||C.areInCyclicOrder(i,h,a))&&(o=!1,C.areInCyclicOrder(i,t,h)?(r=c,a=h):(n=c,i=h)):(n=c,r=c,i=h,a=h,s=!0)}return[n,r]}static midpoint(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2,(e[2]+t[2])/2]}static criticalPlaneBelow(e){return Math.floor(e-.5)}static criticalPlaneAbove(e){return Math.ceil(e-.5)}static bisectToLimit(e,t){const n=C.bisectToSegment(e,t);let r=n[0],i=C.hueOf(r),a=n[1];for(let e=0;e<3;e++)if(r[e]!==a[e]){let n=-1,s=255;r[e]<a[e]?(n=C.criticalPlaneBelow(C.trueDelinearized(r[e])),s=C.criticalPlaneAbove(C.trueDelinearized(a[e]))):(n=C.criticalPlaneAbove(C.trueDelinearized(r[e])),s=C.criticalPlaneBelow(C.trueDelinearized(a[e])));for(let o=0;o<8&&!(Math.abs(s-n)<=1);o++){const o=Math.floor((n+s)/2),l=C.CRITICAL_PLANES[o],c=C.setCoordinate(r,l,a,e),h=C.hueOf(c);C.areInCyclicOrder(i,t,h)?(a=c,s=o):(r=c,i=h,n=o)}}return C.midpoint(r,a)}static inverseChromaticAdaptation(e){const t=Math.abs(e),n=Math.max(0,27.13*t/(400-t));return r(e)*Math.pow(n,1/.42)}static findResultByJ(e,t,n){let r=11*Math.sqrt(n);const i=_.DEFAULT,a=1/Math.pow(1.64-Math.pow(.29,i.n),.73),o=.25*(Math.cos(e+2)+3.8)*(5e4/13)*i.nc*i.ncb,l=Math.sin(e),c=Math.cos(e);for(let e=0;e<5;e++){const h=r/100,w=0===t||0===r?0:t/Math.sqrt(h),y=Math.pow(w*a,1/.9),u=i.aw*Math.pow(h,1/i.c/i.z)/i.nbb,p=23*(u+.305)*y/(23*o+11*y*c+108*y*l),g=p*c,m=p*l,f=(460*u+451*g+288*m)/1403,v=(460*u-891*g-261*m)/1403,b=(460*u-220*g-6300*m)/1403,k=s([C.inverseChromaticAdaptation(f),C.inverseChromaticAdaptation(v),C.inverseChromaticAdaptation(b)],C.LINRGB_FROM_SCALED_DISCOUNT);if(k[0]<0||k[1]<0||k[2]<0)return 0;const _=C.Y_FROM_LINRGB[0],I=C.Y_FROM_LINRGB[1],E=C.Y_FROM_LINRGB[2],M=_*k[0]+I*k[1]+E*k[2];if(M<=0)return 0;if(4===e||Math.abs(M-n)<.002)return k[0]>100.01||k[1]>100.01||k[2]>100.01?0:d(k);r-=(M-n)*r/(2*M)}return 0}static solveToInt(e,t,n){if(t<1e-4||n<1e-4||n>99.9999)return function(e){const t=v(m(e));return h(t,t,t)}(n);const r=(e=a(e))/180*Math.PI,i=m(n),s=C.findResultByJ(r,t,i);if(0!==s)return s;return d(C.bisectToLimit(i,r))}static solveToCam(e,t,n){return I.fromInt(C.solveToInt(e,t,n))}}C.SCALED_DISCOUNT_FROM_LINRGB=[[.001200833568784504,.002389694492170889,.0002795742885861124],[.0005891086651375999,.0029785502573438758,.0003270666104008398],[.00010146692491640572,.0005364214359186694,.0032979401770712076]],C.LINRGB_FROM_SCALED_DISCOUNT=[[1373.2198709594231,-1100.4251190754821,-7.278681089101213],[-271.815969077903,559.6580465940733,-32.46047482791194],[1.9622899599665666,-57.173814538844006,308.7233197812385]],C.Y_FROM_LINRGB=[.2126,.7152,.0722],C.CRITICAL_PLANES=[.015176349177441876,.045529047532325624,.07588174588720938,.10623444424209313,.13658714259697685,.16693984095186062,.19729253930674434,.2276452376616281,.2579979360165119,.28835063437139563,.3188300904430532,.350925934958123,.3848314933096426,.42057480301049466,.458183274052838,.4976837250274023,.5391024159806381,.5824650784040898,.6277969426914107,.6751227633498623,.7244668422128921,.775853049866786,.829304845476233,.8848452951698498,.942497089126609,1.0022825574869039,1.0642236851973577,1.1283421258858297,1.1946592148522128,1.2631959812511864,1.3339731595349034,1.407011200216447,1.4823302800086415,1.5599503113873272,1.6398909516233677,1.7221716113234105,1.8068114625156377,1.8938294463134073,1.9832442801866852,2.075074464868551,2.1693382909216234,2.2660538449872063,2.36523901573795,2.4669114995532007,2.5710888059345764,2.6777882626779785,2.7870270208169257,2.898822059350997,3.0131901897720907,3.1301480604002863,3.2497121605402226,3.3718988244681087,3.4967242352587946,3.624204428461639,3.754355295633311,3.887192587735158,4.022731918402185,4.160988767090289,4.301978482107941,4.445716283538092,4.592217266055746,4.741496401646282,4.893568542229298,5.048448422192488,5.20615066083972,5.3666897647573375,5.5300801301023865,5.696336044816294,5.865471690767354,6.037501145825082,6.212438385869475,6.390297286737924,6.571091626112461,6.7548350853498045,6.941541251256611,7.131223617812143,7.323895587840543,7.5195704746346665,7.7182615035334345,7.919981813454504,8.124744458384042,8.332562408825165,8.543448553206703,8.757415699253682,8.974476575321063,9.194643831691977,9.417930041841839,9.644347703669503,9.873909240696694,10.106627003236781,10.342513269534024,10.58158024687427,10.8238400726681,11.069304815507364,11.317986476196008,11.569896988756009,11.825048221409341,12.083451977536606,12.345119996613247,12.610063955123938,12.878295467455942,13.149826086772048,13.42466730586372,13.702830557985108,13.984327217668513,14.269168601521828,14.55736596900856,14.848930523210871,15.143873411576273,15.44220572664832,15.743938506781891,16.04908273684337,16.35764934889634,16.66964922287304,16.985093187232053,17.30399201960269,17.62635644741625,17.95219714852476,18.281524751807332,18.614349837764564,18.95068293910138,19.290534541298456,19.633915083172692,19.98083495742689,20.331304511189067,20.685334046541502,21.042933821039977,21.404114048223256,21.76888489811322,22.137256497705877,22.50923893145328,22.884842241736916,23.264076429332462,23.6469514538663,24.033477234264016,24.42366364919083,24.817520537484558,25.21505769858089,25.61628489293138,26.021211842414342,26.429848230738664,26.842203703840827,27.258287870275353,27.678110301598522,28.10168053274597,28.529008062403893,28.96010235337422,29.39497283293396,29.83362889318845,30.276079891419332,30.722335150426627,31.172403958865512,31.62629557157785,32.08401920991837,32.54558406207592,33.010999283389665,33.4802739966603,33.953417292456834,34.430438229418264,34.911345834551085,35.39614910352207,35.88485700094671,36.37747846067349,36.87402238606382,37.37449765026789,37.87891309649659,38.38727753828926,38.89959975977785,39.41588851594697,39.93615253289054,40.460400508064545,40.98864111053629,41.520882981230194,42.05713473317016,42.597404951718396,43.141702194811224,43.6900349931913,44.24241185063697,44.798841244188324,45.35933162437017,45.92389141541209,46.49252901546552,47.065252796817916,47.64207110610409,48.22299226451468,48.808024568002054,49.3971762874833,49.9904556690408,50.587870934119984,51.189430279724725,51.79514187861014,52.40501387947288,53.0190544071392,53.637271562750364,54.259673423945976,54.88626804504493,55.517063457223934,56.15206766869424,56.79128866487574,57.43473440856916,58.08241284012621,58.734331877617365,59.39049941699807,60.05092333227251,60.715611475655585,61.38457167773311,62.057811747619894,62.7353394731159,63.417162620860914,64.10328893648692,64.79372614476921,65.48848194977529,66.18756403501224,66.89098006357258,67.59873767827808,68.31084450182222,69.02730813691093,69.74813616640164,70.47333615344107,71.20291564160104,71.93688215501312,72.67524319850172,73.41800625771542,74.16517879925733,74.9167682708136,75.67278210128072,76.43322770089146,77.1981124613393,77.96744375590167,78.74122893956174,79.51947534912904,80.30219030335869,81.08938110306934,81.88105503125999,82.67721935322541,83.4778813166706,84.28304815182372,85.09272707154808,85.90692527145302,86.72564993000343,87.54890820862819,88.3767072518277,89.2090541872801,90.04595612594655,90.88742016217518,91.73345337380438,92.58406282226491,93.43925555268066,94.29903859396902,95.16341895893969,96.03240364439274,96.9059996312159,97.78421388448044,98.6670533535366,99.55452497210776];
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class E{constructor(e){this.argb=e;const t=I.fromInt(e);this.internalHue=t.hue,this.internalChroma=t.chroma,this.internalTone=g(e),this.argb=e}static from(e,t,n){return new E(C.solveToInt(e,t,n))}static fromInt(e){return new E(e)}toInt(){return this.argb}get hue(){return this.internalHue}set hue(e){this.setInternalState(C.solveToInt(e,this.internalChroma,this.internalTone))}get chroma(){return this.internalChroma}set chroma(e){this.setInternalState(C.solveToInt(this.internalHue,e,this.internalTone))}get tone(){return this.internalTone}set tone(e){this.setInternalState(C.solveToInt(this.internalHue,this.internalChroma,e))}setInternalState(e){const t=I.fromInt(e);this.internalHue=t.hue,this.internalChroma=t.chroma,this.internalTone=g(e),this.argb=e}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class M{constructor(e,t){this.hue=e,this.chroma=t,this.cache=new Map}static fromInt(e){const t=E.fromInt(e);return M.fromHueAndChroma(t.hue,t.chroma)}static fromHueAndChroma(e,t){return new M(e,t)}tone(e){let t=this.cache.get(e);return void 0===t&&(t=E.from(this.hue,this.chroma,e).toInt(),this.cache.set(e,t)),t}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const S=e=>{const t=w(e),n=y(e),r=u(e),i=[t.toString(16),n.toString(16),r.toString(16)];for(const[e,t]of i.entries())1===t.length&&(i[e]="0"+t);return"#"+i.join("")};function x(e){return parseInt(e,16)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class A{static harmonize(e,t){const n=E.fromInt(e),r=E.fromInt(t),i=(s=n.hue,o=r.hue,180-Math.abs(Math.abs(s-o)-180));var s,o;const l=Math.min(.5*i,15),c=a(n.hue+l*(h=n.hue,a(r.hue-h)<=180?1:-1));var h;return E.from(c,n.chroma,n.tone).toInt()}static hctHue(e,t,n){const r=A.cam16Ucs(e,t,n),i=I.fromInt(r),a=I.fromInt(e);return E.from(i.hue,a.chroma,g(e)).toInt()}static cam16Ucs(e,t,n){const r=I.fromInt(e),i=I.fromInt(t),a=r.jstar,s=r.astar,o=r.bstar,l=a+(i.jstar-a)*n,c=s+(i.astar-s)*n,h=o+(i.bstar-o)*n;return I.fromUcs(l,c,h).toInt()}}var L=n(945),O=n(242);const T=new L.Z("Styles");function R(e,t){if(F.supportsConstructableStyleSheets)try{e.adoptedStyleSheets=Array.prototype.concat.call(e.adoptedStyleSheets,[t])}catch(e){}else(e===document?document.head:e).appendChild(t)}function W(e){if(F.supportsConstructableStyleSheets){let t=new CSSStyleSheet;return e&&P(t,e),t}{let t=document.createElement("style");return t.dataset.weavy=!0,e&&P(t,e),t}}function P(e,t){if(t=N(t),F.supportsConstructableStyleSheets)try{e.replaceSync(t)}catch(e){}else e.replaceChildren(document.createTextNode(t))}function N(e){let t=[];return e=e.replace(/@import\s+\S*;?/gm,(e=>(t.push(e),""))),e=t.join("\n")+e}class F extends O.Z{static supportsConstructableStyleSheets="adoptedStyleSheets"in document;get console(){return T}#A;#L;#O;#T;#R;#W="";get css(){return this.#W}set css(e){this.#W=e,this.styleSheets.custom??=W(),P(this.styleSheets.custom,e),this.updateStyles()}#P=[];styleSheets={};constructor(e,t){super(),this.#A=e,t&&(this.eventParent=t),this.updateStyles()}updateStyles(){T.log("Updating styles"),this.triggerEvent("before:styles-update"),this.#N(),this.#F(),this.#U(),queueMicrotask((()=>{this.triggerEvent("on:styles-update"),this.#z("Some stylesheets could not be processed"),this.triggerEvent("after:styles-update")}))}#N(){if(this.#O=getComputedStyle(this.#A).fontFamily,this.#O){T.debug("Setting root font.");let e=`:host > * {--wy-font-family:${this.#O}; font-family: var(--wy-font-family); }`;this.styleSheets.font??=W(),P(this.styleSheets.font,e)}}#U(){var e;let t=[...this.#W.matchAll(/--wy-theme-color\s*:\s*(#[a-f\d]{6});/gi)]?.pop();if(t&&(T.debug("Found theme color in custom css.",t),e=t[1]),e||(e=getComputedStyle(this.#A).getPropertyValue("--wy-theme-color")),!e){let t=Array.from(document.head.querySelectorAll("meta[name='theme-color']"));e=t.filter((e=>{let t=e.getAttribute("media");return!t||window.matchMedia(t)?.matches})).pop()?.getAttribute("content")}this.#T=e}#F(){this.#L="",this.#R="";for(var e=[],t={parentElement:this.#A};t=t.parentElement;)for(var n of t.style)n.startsWith("--wy-")&&e.push(n);for(let t of document.styleSheets)try{if(!t.ownerNode?.dataset.weavy&&t instanceof CSSStyleSheet&&t.cssRules)for(let n of t.cssRules)if(!n.parentRule&&(n.cssText.includes(".wy-")&&(T.debug("Found external rule",n.cssText),this.#L+=n.cssText+"\n"),n.cssText.includes("--wy-")))for(let t of n.style)t.startsWith("--wy-")&&e.push(t)}catch(e){this.#P.push({name:t.href||t.ownerNode.nodeName,error:e.toString()})}let r=getComputedStyle(this.#A);e.forEach((e=>{let t=r.getPropertyValue(e);if(t){let n=`${e}:${t};`;T.debug("Found external custom property",n),this.#R+=n}})),this.styleSheets.external??=W(),P(this.styleSheets.external,this.#L)}getAllCSS(){var e=this.#O?`:root{--wy-font-family:${this.#O};}`:"",t=this.#R?`:root{ ${this.#R} }`:"",n="";if(this.#T){let e=[];e.push(`--wy-theme-color:${this.#T};`);let t=(e=>{const t=3===(e=e.replace("#","")).length,n=6===e.length,r=8===e.length;if(!t&&!n&&!r)throw new Error("unexpected hex "+e);let i=0,a=0,s=0;return t?(i=x(e.slice(0,1).repeat(2)),a=x(e.slice(1,2).repeat(2)),s=x(e.slice(2,3).repeat(2))):n?(i=x(e.slice(0,2)),a=x(e.slice(2,4)),s=x(e.slice(4,6))):r&&(i=x(e.slice(2,4)),a=x(e.slice(4,6)),s=x(e.slice(6,8))),(255<<24|(255&i)<<16|(255&a)<<8|255&s)>>>0})(this.#T);const r=E.fromInt(t),i=r.hue,a=r.chroma,s=Math.max(48,a),o=Math.min(s,84),l=360/16,c=27.4,h=-8,d=(i+360-c-h+l/2)%l+c+h-l/2;let w={primary:M.fromHueAndChroma(i,s),secondary:M.fromHueAndChroma(i,s/3),tertiary:M.fromHueAndChroma(i+60,s/2),neutral:M.fromHueAndChroma(i,Math.min(a/12,4)),"neutral-variant":M.fromHueAndChroma(i,Math.min(a/6,8)),error:M.fromHueAndChroma(d,84),red:M.fromHueAndChroma(d,o),"deep-orange":M.fromHueAndChroma(d+1*l,o),orange:M.fromHueAndChroma(d+2*l,o),amber:M.fromHueAndChroma(d+3*l,o),yellow:M.fromHueAndChroma(d+4*l,o),lime:M.fromHueAndChroma(d+5*l,o),"light-green":M.fromHueAndChroma(d+6*l,o),green:M.fromHueAndChroma(d+7*l,o),teal:M.fromHueAndChroma(d+8*l,o),cyan:M.fromHueAndChroma(d+9*l,o),"light-blue":M.fromHueAndChroma(d+10*l,o),blue:M.fromHueAndChroma(d+11*l,o),indigo:M.fromHueAndChroma(d+12*l,o),"deep-purple":M.fromHueAndChroma(d+13*l,o),purple:M.fromHueAndChroma(d+14*l,o),pink:M.fromHueAndChroma(d+15*l,o),gray:M.fromHueAndChroma(i,4)},y={99:99,95:95,90:90,80:80,70:70,60:60,50:50,40:40,30:30,20:20,10:10},u={primary:y,secondary:y,tertiary:y,neutral:y,"neutral-variant":y,error:y,blue:{light:70,dark:80},indigo:{light:60,dark:60},purple:{light:60,dark:70},pink:{light:60,dark:70},red:{light:60,dark:60},orange:{light:70,dark:70},yellow:{light:80,dark:80},green:{light:60,dark:60},teal:{light:60,dark:60},cyan:{light:50,dark:60},gray:{light:50,dark:60}};T.debug("theme color",this.#T);for(let t in u){let n=u[t];for(let r in n){let i=S(w[t].tone(n[r]));e.push(`--wy-${t}-${r}:${i};`)}}let p={light:w.primary.tone(40),dark:w.primary.tone(80)},g={light:w.neutral.tone(99),dark:w.neutral.tone(10)},m={"surface-1":{light:A.cam16Ucs(g.light,p.light,.05),dark:A.cam16Ucs(g.dark,p.dark,.05)},"surface-2":{light:A.cam16Ucs(g.light,p.light,.08),dark:A.cam16Ucs(g.dark,p.dark,.08)},"surface-3":{light:A.cam16Ucs(g.light,p.light,.11),dark:A.cam16Ucs(g.dark,p.dark,.11)},"surface-4":{light:A.cam16Ucs(g.light,p.light,.12),dark:A.cam16Ucs(g.dark,p.dark,.12)},"surface-5":{light:A.cam16Ucs(g.light,p.light,.14),dark:A.cam16Ucs(g.dark,p.dark,.14)}};for(let t in m){let n=m[t];for(let r in n){let i=S(n[r]);e.push(`--wy-${t}-${r}:${i};`)}}n=`:root{${e.join("")}}`}let r=[e,n,this.#L,t,this.#W].filter((e=>e)).join("\n");return r=N(r),r}#z(...e){this.#P.length&&(T.error(...e),this.#P.forEach((e=>T.warn(e.name.toString(),e.error.toString()))),this.#P=[])}}},945:(e,t,n)=>{n.d(t,{Z:()=>o});const r=["#36ace2","#6599eb","#646fed","#773bde","#bc4bce","#d54487","#de4b3b","#e17637","#e3a135","#c9a018","#a4c51b","#cbbc15","#7cd345","#53c657","#45d391","#38dde0"],i="#8c8c8c";function a(e,t,n){return t?n?Function.prototype.bind.call(e,console,"%c%s","color: "+n,t):Function.prototype.bind.call(e,console,"%c%s","color: "+i,t):Function.prototype.bind.call(e,console,"%cWeavy","color: "+i)}var s=function(e,t){if(!e)throw new Error("No context defined.");e instanceof URL&&(e=e.pathname.split("/").pop()||e.pathname||e.origin||e.hostname);var n=self.name?self.name+":":"",o=e.type||e.constructor&&e.constructor.name||"",l=e&&e.name?(o?".":"")+e.name:e.id?"#"+e.id:"",c="string"==typeof e?n+e:n+o+l,h=s.defaults,d=Array.from(n).reduce((function(e,t){return e+t.charCodeAt(0)}),0)%r.length,w=r[d],y=i,u=function(){};Object.defineProperty(this,"options",{get:function(){return h},set:function(e){h=Object.assign({},s.defaults,h,e),y=!0===h?w:!1===h.color?i:"string"==typeof h.color?h.color:w;let t=!0===h||h.log,n=!0===h||h.info,r=!0===h||h.warn,o=!0===h||h.error;this.log=t?a(window.console.log,c,y):u,this.debug=t?a(window.console.debug,c,y):u,this.info=n?a(window.console.info,c,y):u,this.warn=r?a(window.console.warn,c,y):u,this.error=o?a(window.console.error,c,y):u,this.assert=o?Function.prototype.bind.call(console.assert,console):u,this.count=t?Function.prototype.bind.call(console.count,console):u,this.countReset=t?Function.prototype.bind.call(console.countReset,console):u,this.dir=t?Function.prototype.bind.call(console.dir,console):u,this.dirxml=t?Function.prototype.bind.call(console.dirxml,console):u,this.table=t?Function.prototype.bind.call(console.table,console):u,this.time=t?Function.prototype.bind.call(console.time,console):u,this.timeEnd=t?Function.prototype.bind.call(console.timeEnd,console):u,this.timeLog=t?Function.prototype.bind.call(console.timeLog,console):u,this.trace=t?Function.prototype.bind.call(console.trace,console):u,this.clear=Function.prototype.bind.call(console.clear,console),this.group=Function.prototype.bind.call(console.group,console),this.groupCollapsed=Function.prototype.bind.call(console.groupCollapsed,console),this.groupEnd=Function.prototype.bind.call(console.groupEnd,console)}}),this.options=t};s.defaults={color:!0,log:!1,info:!0,warn:!0,error:!0};const o=s},558:(e,t,n)=>{function r(e){if(e){if(e instanceof HTMLElement)return e;if("string"==typeof e)return 0===e.indexOf("<")?function(e){if("content"in document.createElement("template")){var t=document.createElement("template");return t.innerHTML=e.trim(),t.content.children}var n=document.implementation.createHTMLDocument();return n.body.innerHTML=e.trim(),n.body.children}(e)[0]:document.querySelector(e)}}function i(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e,{once:!0})}function a(...e){let t=new Set;return e.forEach((e=>e&&e.split(" ").filter((e=>e)).forEach((e=>t.add(e))))),Array.from(t).join(" ")}n.d(t,{Cd:()=>i,Li:()=>a,yq:()=>r})},242:(e,t,n)=>{n.d(t,{Z:()=>s,n:()=>a});var r=n(935),i=new(n(945).Z)("WeavyEvents");const a=e=>class extends e{#B=[];#Z;get eventParent(){return this.#Z}set eventParent(e){e?.eventChildren&&e.eventChildren.add(this),this.#Z=e}#D=new Set;get eventChildren(){return this.#D}constructor(){super()}#q(e,t,n,r){this.#B.push({events:e,selector:t,handler:n,originalHandler:r})}#H(e,t,n,i){var a={events:e,selector:t,handler:n,originalHandler:i||n},s=this.#B.filter((e=>(0,r.YQ)(a,e,!0))).pop();return s&&s.handler}#j(e,t,n,i){var a={events:e,selector:t,handler:n,originalHandler:i},s=!1;return this.#B.forEach(((e,t)=>{(0,r.YQ)(a,e,!0)&&(s=!0,this.#B.splice(t,1))})),s}#V(e,t,...n){var i=!1;return this.#B.forEach((a=>{a.events.split(" ").forEach((s=>{if(s=0===s.indexOf("on:")?s.split("on:")[1]:s,e===s&&(!a.selector||(0,r.YQ)(a.selector,t,!0))){var o=a.handler(t,...n);o?t=o:!1===o&&(i=!0)}}))})),!i&&t}#$(e){var t,n;return n="function"==typeof e[1]?e[1]:e[2],t="function"==typeof e[1]?null:e[1],{events:e[0],selector:t,handler:n}}on(e,t,n){var r=Array.from(arguments||[]),a=this.#$(r);if(r[3]){this.#q(a.events,a.selector,(()=>{var e=Array.from(arguments||[]);try{a.handler.apply(this,e)}catch(e){try{a.handler()}catch(e){i.warn("Could not invoke one handler:",e)}}this.#j(a.events,a.selector,null,a.handler)}),a.handler)}else this.#q(a.events,a.selector,a.handler,a.handler)}one(e,t,n){this.on(e,t,n,!0)}off(e,t,n){var r=this.#$(Array.from(arguments||[])),i=this.#H(r.events,r.selector,r.handler);return this.#j(r.events,r.selector,i,r.handler)}clearEventHandlers(){this.#B.length=0}triggerEvent(e,t,...n){var r,a=/^(before|on|after):/.test(e),s=a?e.split(":")[0]:"",o="before:"+(e=e.replace(/^(before|on|after):/,"")),l=e,c="after:"+e;if(t&&"string"==typeof t)try{t=JSON.parse(t)}catch(n){i.warn("Could not parse event data",e,t)}if(a){if("before"===s||"after"===s){if(this.#Z&&!1===(t=(r=this.#Z.triggerEvent("before"===s?o:c,t,...n))||!1===r?r:t))return t;if(!1===(t=(r=this.#V("before"===s?o:c,t,...n))||!1===r?r:t))return t}else if("on"===s){if(!1===(t=(r=this.#V(l,t,...n))||!1===r?r:t))return t;if(this.#Z&&!1===(t=(r=this.#Z.triggerEvent("on:"+l,t,...n))||!1===r?r:t))return t}}else{if(this.#Z&&!1===(t=(r=this.#Z.triggerEvent(o,t,...n))||!1===r?r:t))return t;if(!1===(t=(r=this.#V(o,t,...n))||!1===r?r:t))return t;if(!1===(t=(r=this.#V(l,t,...n))||!1===r?r:t))return t;if(this.#Z&&!1===(t=(r=this.#Z.triggerEvent("on:"+l,t,...n))||!1===r?r:t))return t;if(this.#Z&&!1===(t=(r=this.#Z.triggerEvent(c,t,...n))||!1===r?r:t))return t;t=(r=this.#V(c,t,...n))||!1===r?r:t}return t}},s=a(class{})},773:(e,t,n)=>{n.d(t,{O:()=>a,S4:()=>i});const r=[];function i(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function a(e,t){return e="wy-"+(e?e.replace(new RegExp("^wy-"),""):i()+i()),-1!==r.indexOf(e)&&(e=a(e+i(),!0)),t||r.push(e),e}},935:(e,t,n)=>{function r(e){return"[object Object]"===Object.prototype.toString.call(e)}function i(e){var t,n;return!1!==r(e)&&(void 0===(t=e.constructor)||!1!==r(n=t.prototype)&&!1!==Object.prototype.hasOwnProperty.call(n,"isPrototypeOf"))}function a(e,t,n){var r;e=e||{},t=t||{};var s={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n&&s[r]&&i(s[r])&&i(t[r])?s[r]=a(s[r],t[r],n):s[r]=t[r]);return s}function s(e,t,n){return(n||"string"==typeof e&&"string"==typeof t)&&String(e).toUpperCase()===String(t).toUpperCase()}function o(e,t,n,a){if(!(a||i(e)&&i(t)))return!1;if(a&&(!r(e)||!r(t)))return!1;var s=Object.getOwnPropertyNames(e),l=Object.getOwnPropertyNames(t);if(!n&&s.length!==l.length)return!1;for(var c=0;c<s.length;c++){var h=s[c],d=e[h],w=t[h];if(d!==w&&!o(d,w,n))return!1}return!0}n.d(t,{PO:()=>i,YQ:()=>o,f0:()=>a,yv:()=>s})},583:(e,t,n)=>{n.d(t,{Z:()=>h});var r=n(773),i=n(318),a=n(945),s=n(242),o=new a.Z("WeavyPostal");function l(e){var t=null;try{t=/^((?:https?:\/\/[^/]+)|(?:file:\/\/))\/?/.exec(e)[1]}catch(e){o.error("Unable to resolve location origin. Make sure you are using http, https or file protocol and have a valid location URL.")}return t}class c extends s.Z{#G=new Set;#Y=new Map;#J=new WeakMap;#K=new WeakMap;#X=new WeakMap;#Q=new WeakMap;#ee=l(window.location.href);timeout=2e3;get console(){return o}constructor(e){super(),e?.timeout&&(this.timeout=e.timeout),window.addEventListener("message",(e=>{if(e.data.name&&void 0!==e.data.weavyId){if(e.data.weavyMessageId&&"message-receipt"!==e.data.name&&"unready"!==e.data.name){o.debug("sending message receipt",e.data.weavyMessageId,e.data.name);try{e.source.postMessage({name:"message-receipt",weavyId:e.data.weavyId,weavyMessageId:e.data.weavyMessageId},e.origin)}catch(e){o.error("could not post back message-receipt to source")}}switch(e.data.name){case"register-child":if(this.#X.has(e.source)||o.warn("register-child: contentwindow not pre-registered",e.source),this.#J.get(e.source)!==e.origin)return void o.error("register-child: "+this.#K.get(e.source)+" has invalid origin",e.origin);try{var t=this.#X.get(e.source),n=this.#K.get(e.source);n&&e.source.postMessage({name:"register-window",windowName:n,weavyId:t||!0},e.origin)}catch(e){o.error("could not register frame window",t,n,e)}break;case"ready":o.log("received ready",this.#Y.has(e.data.weavyId)&&this.#K.has(e.source)&&this.#Y.get(e.data.weavyId).get(this.#K.get(e.source))===e.source,e.origin),this.#Y.has(e.data.weavyId)&&this.#K.has(e.source)&&this.#Y.get(e.data.weavyId).get(this.#K.get(e.source))&&(this.#Q.set(e.source,e.origin),this.#te(e));break;case"unready":this.#Y.has(e.data.weavyId)&&this.#te(e,!0);break;default:(e.source===window||this.#Y.size)&&this.#te(e)}}}))}#te(e,t){const n=e.source===window&&e.origin===this.#ee;if(t||=this.#J.has(e.source)&&e.origin===this.#J.get(e.source),n||t){t&&!e.data.windowName&&(e.data.windowName=this.#K.get(e.source));let n=e.data.name;this.triggerEvent(n,e.data,e),this.triggerEvent("message",e.data,e)}}registerContentWindow(e,t,n,r){try{if(!t)return void o.error("registerContentWindow() No valid contentWindow to register, must be a window and have a name.")}catch(e){o.error("registerContentWindow() cannot access contentWindowName")}e.self&&(e=e.self),n&&"true"!==n||(n=!0),this.#Y.has(n)||this.#Y.set(n,new Map),this.#Y.get(n).set(t,e),this.#G.add(e),this.#K.set(e,t),this.#X.set(e,n),this.#J.set(e,r)}unregisterAll(e){this.#Y.has(e)&&(this.#Y.get(e).forEach(((t,n)=>{this.unregisterContentWindow(n,e)})),this.#Y.get(e),this.#Y.delete(e))}unregisterContentWindow(e,t){if(this.#Y.has(t)){if(this.#Y.get(t).has(e)){var n=this.#Y.get(t).get(e);try{this.#G.delete(n),this.#K.delete(n),this.#X.delete(n),this.#J.delete(n)}catch(e){}}if(this.#Y.get(t).delete(e),0===this.#Y.get(t).size)try{this.#Y.delete(t)}catch(e){}}}#ne(e,t,n){var a=new i.Z;null===n&&(n=void 0);var s=e===window.self,c=s?l(window.location.href):this.#J.get(e);return s||e&&c===this.#Q.get(e)?(t.weavyMessageId||(t.weavyMessageId=(0,r.S4)()+(0,r.S4)()),queueMicrotask((()=>{var r=setTimeout((()=>{"pending"===a.state()&&a.reject(new Error("postMessage() receipt timed out: "+t.weavyMessageId+", "+t.name))}),this.timeout||2e3);this.on("message-receipt",{weavyId:t.weavyId,weavyMessageId:t.weavyMessageId},(()=>{o.debug("message-receipt received",t.weavyMessageId,t.name),clearTimeout(r),a.resolve()}));try{e.postMessage(t,c,n)}catch(e){a.reject(e)}}))):a.reject(new Error("postMessage() Invalid window origin: "+c+", "+t.name)),a()}postToChildren(e,t){"object"==typeof e&&e.name?(null===t&&(t=void 0),e.distributeName=e.name,e.name="distribute",e.weavyId=e.weavyId||!0,this.#G.forEach((n=>{if(this.#J.get(n)===this.#Q.get(n))try{n.postMessage(e,this.#J.get(n),t)}catch(e){o.warn("postToChildren() could not distribute message to "+this.#K.get(n))}}))):o.error("postToChildren() Invalid message format",e)}postToFrame(e,t,n,r){if("object"==typeof n&&n.name){var i;try{i=this.#Y.get(t).get(e)}catch(n){o.error("postToFrame() Window not registered",t,e)}return n.weavyId=t,this.#ne(i,n,r)}o.error("postToFrame() Invalid message format",n)}postToSelf(e,t){if("object"==typeof e&&e.name)return e.weavyId=e.weavyId||!0,this.#ne(window.self,e,t);o.error("postToSelf() Invalid message format",e)}postToSource(e,t,n){if(e.source&&void 0!==e.data.weavyId){var r=e.source===window.self&&e.origin===this.#ee,i=this.#J.has(e.source)&&e.origin===this.#J.get(e.source);if(null===n&&(n=void 0),r||i){t.weavyId=e.data.weavyId;try{e.source.postMessage(t,e.origin,n)}catch(e){o.error("postToSource() Could not post message back to source",e)}}}}}const h=new c},318:(e,t,n)=>{n.d(t,{Z:()=>i}),window.addEventListener("unhandledrejection",(function(e){e.promise.weavy&&e.preventDefault()}));var r=function(e){var t,n="pending",r=function(){return t};return r.promise=r.bind(r),r.state=function(){return n},(r.reset=function(){var i,a;return n="pending",t=new Promise((function(e,t){i=function(){n="resolved",e.apply(this,arguments)},a=function(){n="rejected",t.apply(this,arguments)}})),t.weavy=!0,r.resolve=function(){return i.apply(t,arguments),r},r.reject=function(){return a.apply(t,arguments),r},"function"==typeof e&&e(i,a),r})(),r.then=function(){return(t=t.then.apply(t,arguments)).weavy=!0,r},r.catch=function(){return(t=t.catch.apply(t,arguments)).weavy=!0,r},r.finally=function(){return(t=t.finally.apply(t,arguments)).weavy=!0,r},r};r.resolve=function(e){var t=r();return t.resolve(e),t},r.reject=function(e){var t=r();return t.reject(e),t};const i=r},216:(e,t,n)=>{n.d(t,{W:()=>a});var r=n(318),i=[];function a(e){var t,n=new r.Z,a=()=>{var e=i.indexOf(t);e>=0&&i.splice(e,1)};return i.push(t=setTimeout((()=>{n.resolve()}),e)),n.then(a),n.catch((()=>(a(),clearTimeout(t),Promise.reject(new Error("Timeout cancelled"))))),n.cancel=function(){a(),clearTimeout(t)},n}},754:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _components_environment__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(252),_utils_promise__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(318),_utils_console__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(945);const console=new _utils_console__WEBPACK_IMPORTED_MODULE_2__.Z("Weavy");console.info("weavy.js loaded","");class Weavy extends HTMLElement{defaults={shadowMode:"closed",filebrowser:"https://filebrowser.weavy.io/v14/",get console(){return _utils_console__WEBPACK_IMPORTED_MODULE_2__.Z.defaults},set console(e){_utils_console__WEBPACK_IMPORTED_MODULE_2__.Z.defaults=e}};get version(){return"19.0.0"}#re;get environment(){if(!this.#re)throw new Error("No URL is defined for the environment. Please point Weavy.url to your environment.");return this.#re}get url(){return this.#re?.url}set url(e){this.setAttribute("url",e)}#c;get tokenFactory(){return this.environment?.options.tokenFactory||this.#c}set tokenFactory(e){this.#c=e,this.#re&&this.#re.configure({tokenFactory:e})}#ie;get tz(){return this.#re?.options.tz||this.#ie}set tz(e){e?this.setAttribute("tz",e):this.removeAttribute("tz")}#ae;get lang(){return this.#re?.options.lang||this.#ae}set lang(e){e?this.setAttribute("lang",e):this.removeAttribute("lang")}#se=new _utils_promise__WEBPACK_IMPORTED_MODULE_1__.Z;async whenReady(){return await this.#se()}get fetch(){if(!this.#re)throw new Error("fetch: No URL is defined for the environment. Please point Weavy.url to your environment.");return this.environment?.fetch}static get observedAttributes(){return["url","token-factory","tz","lang","class"]}attributeChangedCallback(name,oldValue,newValue){"url"===name?(this.#re=_components_environment__WEBPACK_IMPORTED_MODULE_0__.Z.get(newValue),this.#re.console.options=this.defaults.console,this.#re.configure({defaults:this.defaults,tokenFactory:this.tokenFactory,tz:this.tz,lang:this.lang,version:this.version}),this.#se.resolve()):"tz"===name?(this.#ie=newValue,this.#re&&this.#re.configure({tz:newValue})):"lang"===name?(this.#ae=newValue,this.#re&&this.#re.configure({lang:newValue})):"token-factory"===name?(this.#c=eval?.(`"use strict";(${newValue})`),this.#re&&this.#re.configure({tokenFactory:this.#c})):"class"===name&&(this.defaults.className=newValue)}constructor(){super()}connectedCallback(){this.getAttributeNames().forEach((e=>{this.attributeChangedCallback(e,null,this.getAttribute(e))}))}}customElements.define("weavy-environment",Weavy);const StaticWeavy=new Weavy,__WEBPACK_DEFAULT_EXPORT__=StaticWeavy},6:e=>{e.exports="data:image/svg+xml,%3Csvg viewBox=%270 0 24 24%27 width=%2724%27 height=%2724%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27%3E%3Cstyle type=%27text/css%27%3Eg%7Banimation:rotate 2s linear infinite;transform-origin:center center%7Dcircle%7Bstroke-dasharray:1,100;stroke-dashoffset:0;animation:dash 1.5s ease-in-out infinite,color 6s ease-in-out infinite%7D@keyframes rotate%7B100%25%7Btransform:rotate%28360deg%29%7D%7D@keyframes dash%7B0%25%7Bstroke-dasharray:1,100;stroke-dashoffset:0%7D50%25%7Bstroke-dasharray:44.5,100;stroke-dashoffset:-17.5px%7D100%25%7Bstroke-dasharray:44.5,100;stroke-dashoffset:-62px%7D%7D@keyframes color%7B0%25,100%25%7Bstroke:%23216eb4%7D40%25%7Bstroke:%2328b7cf%7D66%25%7Bstroke:%23216eb4%7D80%25,90%25%7Bstroke:%2328b7cf%7D%7D%3C/style%3E%3Cg%3E%3Ccircle fill=%27none%27 cx=%2712%27 cy=%2712%27 r=%2711%27 stroke-linecap=%27butt%27 stroke-width=%272%27 /%3E%3C/g%3E%3C/svg%3E"}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.b=document.baseURI||self.location.href;var __webpack_exports__={};(()=>{__webpack_require__.d(__webpack_exports__,{Chat:()=>k,Files:()=>_,Messenger:()=>b,Posts:()=>I,Weavy:()=>e.Z,WeavyApp:()=>v});var e=__webpack_require__(754),t=__webpack_require__(935),n=__webpack_require__(318),r=__webpack_require__(945),i=__webpack_require__(242),a=__webpack_require__(583),s=__webpack_require__(216);const o=new r.Z("Panel");class l extends((0,i.n)(HTMLElement)){#re;#oe;#le;#ce;panelId;attributes;node;frame;get console(){return o}#t="";get className(){return this.#t}set className(e){this.#t=e,this.postStyles()}location;statusCode;stateChangedAt;#ee;get isOpen(){return this.node?.classList.contains("wy-open")||!1}#M=!1;get isLoading(){return this.#M}#he=!1;get isRegistered(){return this.#he}#de=!1;get isReady(){return this.#de}#we=!1;get isLoaded(){return this.#we}whenDOMConnected=new n.Z;whenReady=new n.Z;whenLoaded=new n.Z;whenClosed=n.Z.resolve();constructor(){super()}connectedCallback(){o.log("panel dom connected",this.panelId),this.whenDOMConnected.resolve()}configure(e,n,r,i,s){if(o.log("configuring panel",n),!n)throw new Error("new WeavyPanel() is missing panelId");this.#re=e,(0,t.PO)(i)||(i={}),s&&(this.eventParent=s),o.debug("creating panel",n),this.panelId=n,this.attributes=i,i.origin?(this.#ee=i.origin,o.log(this.panelId,"setting attribute origin",this.#ee)):r?(this.#ee=new URL(r,this.#re.url).origin,o.log(this.panelId,"setting url/environment origin",this.#ee)):(this.#ee=this.#re.url.origin,o.log(this.panelId,"setting environment origin",this.#ee)),i.className&&(this.#t=i.className),this.node=this.#ye(i),this.node.appendChild(this.#ue(i)),this.frame=this.#pe(r),this.node.appendChild(this.frame),this.node.frame=this.frame,this.frame.dataset.src&&(this.location=new URL(this.frame.dataset.src,this.#re.url).href),i.type&&(this.node.dataset.type=i.type),this.on("panel-loading",(e=>{requestAnimationFrame((()=>{e.isLoading?this.node.classList.add("wy-loading"):this.node.classList.remove("wy-loading"),e.isLoaded?this.node.classList.add("wy-loaded"):this.node.classList.remove("wy-loaded")}))})),a.Z.on("ready",{weavyId:this.#re.getId(),windowName:this.frame.name},(e=>this.#ge(e))),a.Z.on("unready",{weavyId:this.#re.getId(),windowName:this.frame.name},(()=>this.#me())),a.Z.on("load",{weavyId:this.#re.getId(),windowName:this.frame.name},(()=>{this.whenLoaded.resolve(this)})),a.Z.on("overlay-open",{weavyId:this.#re.getId(),windowName:this.frame.name},(e=>{var t=new URL(e.url,this.#re.url).href;e.url=t,e.overlayId=e.overlayId||e.type||e.weavyMessageId||"overlay",o.log("overlay-open",e),this.triggerEvent("overlay-open",e)})),a.Z.on("navigation-open",{weavyId:this.#re.getId(),windowName:this.frame.name},((e,t)=>{let n="string"==typeof e.route?{url:e.route}:e.route;o.log("navigation-open",n),n.source=e.windowName,n=this.triggerEvent("before:navigate",n),!1!==n&&(o.info("navigate: trying internal auto navigation"),this.open(n.url).catch((()=>{n=this.triggerEvent("on:navigate",n),!1!==n&&this.triggerEvent("after:navigate",n)})))})),a.Z.on("message",{weavyId:this.#re.getId(),windowName:this.frame.name},((e,n)=>this.triggerEvent("message",(0,t.f0)(e,{panelId:this.panelId}),n))),this.on("panel-ready",(()=>{o.log("panel-ready -> postStyles()"),this.postStyles()})),a.Z.on("request:reset",{weavyId:this.#re.getId(),windowName:this.frame.name},(()=>{this.reset()})),a.Z.on("request:close",{weavyId:this.#re.getId(),windowName:this.frame.name},(()=>{this.close()})),this.triggerEvent("panel-added",{panel:this,panelId:this.panelId,url:r,attributes:i});const l=()=>{this.node.isConnected&&this.frame.contentWindow?this.whenDOMConnected.resolve():requestAnimationFrame(l)};l()}#ye(e){const t=this.#re.getId("panel-container-"+this.panelId),n=document.createElement("div");return n.className="wy-panel",e.className&&n.classList.add(...e.className.split(" ")),n.id=t,n.dataset.id=this.panelId,e.title&&(n.dataset.title=e.title),n}#pe(e){var t=document.createElement("iframe");return t.className="wy-panel-frame",t.id=this.#re.getId("panel-"+this.panelId),t.name=this.#re.getId("panel-"+this.panelId),t.allowFullscreen=1,t.loading="lazy",t.dataset.weavyId=this.#re.getId(),e&&(t.dataset.src=new URL(e,this.#re.url).href),t}#fe(){if(!this.#he){try{o.log("registering panel",this.frame.contentWindow.self,this.frame.name,this.#re.getId(),this.#ee),a.Z.registerContentWindow(this.frame.contentWindow.self,this.frame.name,this.#re.getId(),this.#ee)}catch(e){o.error("Could not register window id",this.frame.name,e)}this.#he=!0}}#ve(){this.isLoading?(this.#fe(),this.#ce=(0,s.W)(3e4),this.#ce.then((()=>{this.#M=!1,this.#ve()}))):this.#ce&&(this.#ce.cancel(),this.#ce=null),this.triggerEvent("panel-loading",{panelId:this.panelId,isLoading:this.isLoading,isLoaded:this.isLoaded})}loadingStarted(e){e&&(this.#we=!1),this.#M=!0,this.#ve()}loadingFinished(){this.#we=!0,this.#M=!1,this.#ve()}#ge(e){this.#de=!0,this.triggerEvent("before:panel-ready",{panelId:this.panelId});var t=this.location,n=this.statusCode,r=!e.statusCode||200===e.statusCode;this.location=new URL(e.location,this.#re.url).href,this.statusCode=e.statusCode,"string"==typeof e.title&&e.title&&(this.node.dataset.title=e.title),this.loadingFinished(),n===e.statusCode||r||o.warn(e.location+" "+e.statusCode+" "+e.statusDescription);var i=t&&t!==this.location,a=n!==this.statusCode,s=this.location===this.frame.dataset.src&&!this.isOpen;this.isOpen&&(i||a)&&(i&&r&&!s?this.stateChangedAt=Date.now():r&&!s||(this.stateChangedAt=null),this.triggerEvent("panel-history-add",{action:"replace",state:this.getState()})),this.triggerEvent("on:panel-ready",{panelId:this.panelId}),this.whenReady.resolve(this),this.triggerEvent("after:panel-ready",{panelId:this.panelId})}#me(){this.triggerEvent("before:panel-unready",{panelId:this.panelId}),this.#de=!1,this.loadingStarted(!0),this.whenReady.reset(),this.triggerEvent("on:panel-unready",{panelId:this.panelId}),this.triggerEvent("after:panel-unready",{panelId:this.panelId})}async#be(e,t,n,r){if(await this.#re.whenReady(),await this.whenDOMConnected(),r=String(r||"get").toLowerCase(),e){var i=t;if("get"===r&&n&&(i=-1===i.indexOf("?")?i+"?"+n:i+"&"+n),e.src!==i){if(e.src=i,"get"===r)return void o.debug("sendToFrame using src")}else if(e.src&&"get"===r)return o.debug("sendToFrame using window.open"),void window.open(i,e.name);o.debug("sendToFrame using form");var a=document.createElement("form");if(a.action=t,a.method=r,a.target=e.name,n&&(n=n.replace(/\+/g,"%20")),(n&&n.split("&")||[]).forEach((e=>{var t=e.split("="),n=decodeURIComponent(t[0]),r=decodeURIComponent(t[1]),i=document.createElement("input");i.type="hidden",i.name=n,i.value=r,a.appendChild(i)})),!e.parentElement)throw new Error("Could not send to frame. The frame is not connected to the DOM.");e.parentElement.appendChild(a),a.submit(),a.remove()}}#ue(e){var t=document.createElement("div");if(t.className="wy-controls",e.controls&&(!0===e.controls||e.controls.close)){var n=document.createElement("button");n.className="wy-button wy-button-icon"+("string"==typeof e.controls.close?" "+e.controls.close:""),n.title="Close",n.innerHTML='<svg height="24" viewBox="0 0 24 24" width="24" data-icon="close" class="wy-icon"><path d="m19 6.41-1.41-1.41-5.59 5.59-5.59-5.59-1.41 1.41 5.59 5.59-5.59 5.59 1.41 1.41 5.59-5.59 5.59 5.59 1.41-1.41-5.59-5.59z"></path></svg>',n.onclick=()=>this.close(),t.appendChild(n)}return t}focus(e){if(e)this.node.focus();else try{this.frame.contentWindow.focus()}catch(e){this.frame.focus()}}async open(e,t){if(await this.#re.whenReady(),await this.whenDOMConnected(),o.log("openPanel",this.panelId+(e?" "+e:""),t?"no history":"with history"),!this.#re.authentication.isAuthorized)throw new Error("Unauthorized, can't open panel "+this.panelId);var n=this.triggerEvent("panel-open",{panelId:this.panelId,destination:e,panels:this.#le});if(!1!==n&&n.panelId===this.panelId)return window.requestAnimationFrame((()=>this.node.classList.add("wy-transition"))),this.node.classList.add("wy-open"),t||(this.focus(!0),this.whenLoaded().then((()=>this.focus()))),await this.load(n.destination,null,null,null,t);throw new Error("Prevented open "+this.panelId)}async close(e,t){if(await this.#re.whenReady(),await this.whenDOMConnected(),this.isOpen){o.info("closePanel",this.panelId,!0===t?"no event":"",!0===e?"no history":""),this.whenClosed.reset();var n=[];this.triggerEvent("before:panel-close",{panelId:this.panelId,panels:this.#le}),this.node.classList.remove("wy-open","wy-transition"),!0!==t&&(this.triggerEvent("on:panel-close",{panelId:this.panelId,panels:this.#le}),!0!==e&&(this.stateChangedAt=Date.now(),this.triggerEvent("panel-history-add",{action:"push",state:this.getState()}))),n.push(this.postMessage({name:"close"})),n.push((0,s.W)(250)),await Promise.all(n),await this.postMessage({name:"closed"}),this.triggerEvent("after:panel-close",{panelId:this.panelId,panels:this.#le}),this.whenClosed.resolve()}}async load(e,t,n,r,i){await this.#re.whenReady(),await this.whenDOMConnected();var a=this.frame;if(o.log("panel.load",e,r),e){if(e=new URL(e,this.#re.url).href,o.log("checking origin",this.#re.origins,new URL(e,this.#re.url).origin),!this.#re.origins.has(new URL(e,this.#re.url).origin))return Promise.reject("panel url has invalid origin",new URL(e,this.#re.url).origin);this.location=e,this.isReady?(o.log("panel is ready, load"),r&&this.loadingStarted(!0),await this.postMessage({name:"turbo-visit",url:e,data:t,method:n,action:"replace"})):(o.log("panel not ready load"),this.loadingStarted(r),await this.#be(a,e,t,n))}else this.isLoaded||this.isLoading?(this.isLoaded||this.isLoading)&&await this.postMessage({name:"show"}):(o.debug("panels:",this.panelId,"predefined loading"),this.loadingStarted(!0),a.setAttribute("src",a.dataset.src));!0!==i&&(this.stateChangedAt=Date.now(),o.debug("panels: adding history state",this.panelId,this.location),this.triggerEvent("panel-history-add",{action:"push",state:this.getState()}))}async reload(){await this.#re.whenReady(),await this.whenDOMConnected(),this.isLoading=!0,await this.postMessage({name:"reload"}),this.triggerEvent("panel-reload",{panelId:this.panelId})}async reset(){await this.#re.whenReady(),await this.whenDOMConnected();var e=this.frame;if(e){o.log("resetting panel",this.panelId);var t=this.#pe(e.dataset.src||e.src);this.#he=!1,this.#de=!1,this.#we=!1,this.#M=!1,this.location=null,this.statusCode=null,this.whenReady.reset(),this.whenLoaded.reset();var n=this.isOpen;try{a.Z.unregisterContentWindow(e.name,this.#re.getId())}catch(t){o.error("Could not unregister window id",e.name,t)}this.node.removeChild(e),this.node.appendChild(t),this.frame=t,this.triggerEvent("panel-reset",{panelId:this.panelId}),n&&await this.load(null,null,null,null,!0)}}getState(){o.debug("getPanelState",this.panelId);var e=this.#re.getId(),t="wy://"+this.#re.getId(this.panelId).replace("__","@")+(this.location&&new URL(this.location,this.#re.url).pathname||"");return{id:this.node.id,panelId:this.panelId,isOpen:this.isOpen,location:this.location,statusCode:this.statusCode,title:this.node.dataset.title,weavyId:e,weavyUri:t,changedAt:this.stateChangedAt,attributes:this.attributes}}async setState(e){if(e&&e.panelId===this.panelId)if(e.title&&(this.node.dataset.title=e.title),!e.statusCode||200===e.statusCode)if(e.isOpen===this.isOpen&&e.location===this.location||(this.stateChangedAt=e.changedAt),e.isOpen){var t=e.location!==this.location?e.location:null;this.isOpen?await this.open(t,!0):await this.open(e.location,!0)}else await this.close(!0);else o.warn("setState: Invalid url http status.",this.panelId);else o.warn("setState: State not valid.",this.panelId)}async postMessage(e,t){await this.whenReady();var n=this.frame;if(!n)throw new Error("No valid panel frame for "+this.panelId+".");if(!n.isConnected)throw new Error("Panel frame "+this.panelId+" is not connected to the DOM.");if(!n||!a.Z)throw new Error("Could not post message to frame");await a.Z.postToFrame(n.name,this.#re.getId(),e,t)}async remove(e,t){if(e||await this.#re.whenReady(),this.isOpen)this.node.id=this.#re.getId("weavy-panel-removed-"+this.panelId),await(0,s.W)(0),await this.close(t),await this.remove(e,t);else{try{a.Z.unregisterContentWindow(this.frame.name,this.#re.getId())}catch(e){o.error("Could not unregister window id",this.frame.name,e)}this.node.remove(),this.#oe.delete(this.panelId),this.#le.triggerEvent("panel-removed",{panelId:this.panelId})}}async postStyles(){let e=this.triggerEvent("before:panel-css",{panelId:this.panelId,css:""});if(!e)return;if(e=this.triggerEvent("on:panel-css",{panelId:this.panelId,css:e.css}),!e)return;let t=[this.className].filter((e=>e)).join(" ");await this.postMessage({name:"styles",id:this.panelId,css:e.css,className:t}),this.triggerEvent("after:panel-css",e)}}window.customElements.define("weavy-panel",l);var c=__webpack_require__(911),h=__webpack_require__(558);const d=new r.Z("Overlays"),w={modal:"wy-modal",preview:"wy-dark",overlay:"wy-modal-full"},y={preview:/^(.*)(\/attachments\/[0-9]+\/?)(.+)?$/,content:/^(.*)(\/content\/[0-9]+\/?)(.+)?$/};class u extends i.Z{#re;root;get console(){return d}#ke=new Map;#k=null;#t="";get className(){return this.#t}set className(e){this.#t=e,this.#ke.forEach((e=>{e.className=(0,h.Li)(e.baseClassName,this.#t)}))}#W;set css(e){this.#W=e}get container(){return this.#k}constructor(e,t,n){super(),this.#re=e,this.root=t,this.eventParent=n,this.#k||(this.#k=document.createElement("div"),this.root.container.classList.add("wy-viewport"),this.root.container.appendChild(this.#k),d.log("overlay root",this.#k),this.#k.classList.add("wy-overlays"));const r=e=>{var t=this.#_e();if(t)return 27===e?(t.close(),!0):(t.postMessage({name:"key:trigger",which:e}),!0)};a.Z.on("key:press",{weavyId:this.#re.getId()},(e=>{d.log("bouncing key",e.which,this.#_e()?.panelId),r(e.which)})),document.addEventListener("keyup",(e=>{r(e.which)&&e.stopImmediatePropagation()}))}getOverlay(e){e=(0,t.f0)(e),e.controls??={close:!0};let n=e.overlayId||e.type||"overlay",r=this.#ke.get(n);if(r)e.title?r.node.dataset.title=e.title:delete r.node.dataset.title;else{let t=new URL(e.url,this.#re.url);e.type&&(e.className=(0,h.Li)(w[e.type],e.className));let i=e.className;this.#t&&(e.className=(0,h.Li)(e.className,this.#t)),r=new l,r.configure(this.#re,"overlay:"+n,t,e,this),this.#k.appendChild(r.node),r.on("panel-open",(()=>{this.#Ie(n)})),r.on("panel-history-add",(({action:e,state:t})=>{this.triggerEvent("overlay-history-add",{action:e,states:Array.from(this.#ke.values()).map((e=>e.getState()))})})),r.baseClassName=i,this.#ke.set(n,r),d.log("created overlay",r)}return r}async open(e){await this.#re.whenReady();var t=e.url,n=e.target||"overlay";"overlay"===n&&y.preview.test(t)&&(n="preview");var r=this.getOverlay({type:n,url:t});e.source&&e.source!==r.frame.name&&this.#Ce(r),await r.open(t),d.log("OVERLAY OPENED")}async openState(e){await this.#re.whenReady(),d.log("open overlay history state",e);let n=(0,t.f0)(e.attributes,{title:e.title});this.getOverlay(n).setState(e)}async closeAll(e){await this.#re.whenReady(),await Promise.all(Array.from(this.#ke.values()).map((async t=>{await t.close(e)})))}async postStyles(){await this.#re.whenReady(),await Promise.all(Array.from(this.#ke.values()).map((async e=>{await e.postStyles()})))}#Ie(e){var t=this.#ke.get(e);t&&(d.debug("preview panels moveToFront",e),this.#ke.delete(e),this.#ke.set(e,t),requestAnimationFrame((()=>this.#Ee())))}#Ee(){d.debug("sorting overlays"),Array.from(this.#ke.values()).filter((e=>e.isOpen)).reverse().forEach(((e,t)=>{e.node&&(e.node.style.transform="translateZ(-"+t+"rem)")}))}#Ce(e){e.isOpen?e.loadingStarted(!0):e.reset()}#_e(){return Array.from(this.#ke.values()).filter((e=>e.isOpen)).pop()}}var p=__webpack_require__(690);const g=new r.Z("Filebrowser");class m{#re;#ke;#Me;#s;#Se="";#xe=null;get console(){return g}constructor(e,t,n){this.#re=e,this.#ke=t,this.#s=new URL(n?.url||this.#re.options.defaults.filebrowser);try{window.location.ancestorOrigins&&0<window.location.ancestorOrigins.length?this.#Se=window.location.ancestorOrigins[window.location.ancestorOrigins.length-1]:this.#Se=window.top.document.location.origin}catch(e){}if(!this.#Se)try{this.#Se=window.self.document.location.origin}catch(e){g.error("Could not read current origin.")}}loadFilebrowser(e){e&&(this.#xe=e),g.log("Loading file browser");let t={};t.url=this.#s.href+"?origin="+this.#Se+"&v=X&t="+Date.now().toString()+"&weavyId="+this.#re.getId(),t.overlayId="filebrowser",t.type="filebrowser",t.className="wy-modal",t.title="Add file from cloud";let n=this.#ke.getOverlay(t);this.filebrowserInit(n),this.#Me.location&&this.#Me.location!==t.url&&this.#Me.reset(),this.#Me.open(t.url)}filebrowserInit(e){e!==this.#Me&&(this.#Me=e,this.#Me.node.classList.remove("wy-modal-full"),this.#Me.on("message",((e,t)=>{"google-selected"===e.name&&this.#Me.node.classList.add("wy-modal-full"),"add-external-blobs"===e.name&&this.#xe&&(a.Z.postToSource(this.#xe,e),this.#Me?.close()),"request:file-browser-close"===e.name&&(this.#Me?.close(),this.#xe&&a.Z.postToSource(this.#xe,Object.assign({},e,{name:"file-browser-closed"})))})),this.#Me.on("before:panel-close",(()=>{this.#Me.loadingStarted(!0)})),this.#Me.on("after:panel-close",(()=>{this.#Me.node.classList.remove("wy-modal-full")})))}}const f=new r.Z("App");class v extends((0,i.n)(HTMLElement)){static defaults={load:!0};static get observedAttributes(){return["class","load","uid","css"]}attributeChangedCallback(e,t,n){"class"===e&&this.whenBuilt().then((()=>{this.root.className=n,this.panel.className=n,this.overlays.className=n})),"css"===e&&(this.css=n,this.whenBuilt().then((()=>{this.panel.postStyles()})))}get console(){return f}get uid(){return this.getAttribute("uid")}set uid(e){this.setAttribute("uid",e)}get autoLoad(){return"false"!==this.getAttribute("load")}set autoLoad(e){!1===e?this.setAttribute("load","false"):e?this.setAttribute("load",e):this.removeAttribute("load")}get className(){return this.getAttribute("class")||""}set className(e){e?this.setAttribute("class",e):this.removeAttribute("class")}#re;get environment(){return this.#re||e.Z.environment}static#Ae=[];options={};data;root=null;overlayRoot=null;panel=null;overlays;filebrowser;#Le;url=null;name=null;type=null;isInitialized=!1;isBuilt=!1;get isLoaded(){return!!this.panel&&this.panel.isReady}#_;get css(){return this.#_.css}set css(e){this.#_.css=e}whenInitialized=new n.Z;whenBuilt=new n.Z;whenLoaded=new n.Z;constructor(n,r){super(),this.options=(0,t.f0)((0,t.f0)(e.Z.defaults,v.defaults,!0),n,!0),f.options=this.options.console,f.debug("new WeavyApp",n),r&&(this.data=r),this.#_=new p.ZP(this),this.#_.eventParent=this,this.hasAttribute("css")?this.#_.css=this.getAttribute("css"):void 0!==this.options.styles&&(this.#_.css=this.options.css),this.#_.on("styles-update",(async()=>{await this.whenBuilt();for(const e in this.#_.styleSheets){let t=this.#_.styleSheets[e];(0,p.MC)(this.root.dom,t),(0,p.MC)(this.overlayRoot.dom,t)}this.panel.postStyles()})),this.#Le=this.uid||this.type||this.options.uid||this.options.type;try{this.root=new c.Z(this),this.root.className=this.className}catch(e){f.warn("could not create app root in container:",this.#Le,e)}try{this.overlayRoot=new c.Z(this),this.overlayRoot.className=this.className}catch(e){f.warn("could not create app overlays root in container:",this.#Le,e)}e.Z.whenReady().then((()=>{this.configure(),this.options=(0,t.f0)((0,t.f0)(e.Z.defaults,v.defaults,!0),n,!0),this.environment.on("history-restore",(e=>{f.log("history-restore",e),this.openBrowserState(e)}))}))}connectedCallback(){this.configure(),this.root.className=this.className,this.overlayRoot.className=this.className,this.append(this.root.root),document.documentElement.append(this.overlayRoot.root),this.hasAttribute("css")&&(this.css=this.getAttribute("css")),e.Z.whenReady().then((()=>{this.#_.updateStyles(),this.fetchOrCreate(),f.log("hey",this.autoLoad),this.isLoaded||!1===this.autoLoad||this.load(null,!0)}))}async configure(e,n){e&&"object"==typeof e&&(this.options=(0,t.f0)(this.options,e,!0)),n&&"object"==typeof n&&(this.data=n),this.options&&"object"==typeof this.options&&(!1===this.options.load&&(this.autoLoad=!1),void 0!==this.options.className&&null!==this.options.className&&(this.className=(0,h.Li)(this.options.className,this.className)),null===this.uid&&this.options.uid&&(this.uid=this.options.uid),null===this.name&&this.options.name&&(this.name=this.options.name),null===this.type&&this.options.type&&(this.type=this.options.type),this.#Le=this.uid||this.type),this.data&&"object"==typeof this.data&&(!this.uid&&this.data.uid&&(this.uid=this.data.uid),null===this.url&&this.data.url&&(this.url=new URL(this.data.url,this.environment.url)),this.#Le=this.uid||this.type,this.isInitialized=!0,this.triggerEvent("app-init"),this.whenInitialized.resolve())}async fetchOrCreate(){var e=new URL("/dropin/client/app",this.environment.url);try{let t=await this.environment.fetch(e,{uid:this.uid,type:this.type},"POST");this.data=t}catch(e){throw f.error("fetchOrCreate() failed",e),this.whenInitialized.reject(e),new Error(e)}await this.configure(),await this.build()}async build(){if(!this.isBuilt&&this.isInitialized){this.isBuilt=!0,f.debug("build()"),this.overlays=new u(this.environment,this.overlayRoot,this),this.overlays.className=this.className,this.on("panel-css",(e=>{e.css=(0,p.aJ)([e.css,this.#_.getAllCSS()].filter((e=>e)).join("\n"))})),this.on("overlay-open",(e=>{this.overlays.getOverlay(e).open(e.url)})),this.on("before:navigate",(e=>(f.log("before:navigate",e),this.#Oe(e),!1))),this.on("overlay-history-add",(({action:e,states:t})=>{this.environment.setHistory(e,{id:"overlays-"+this.#Le,overlays:t})})),this.filebrowser=new m(this.environment,this.overlays),this.environment.authentication.on("signed-in",(async()=>{this.isLoaded&&this.load(null,!0)}));var e="app-"+this.#Le;this.panel=new l,this.panel.configure(this.environment,e,this.url,{className:this.className},this),this.root.container.appendChild(this.panel.node),this.panel.on("panel-history-add",(({action:e,state:t})=>{t.id=this.#Le,this.environment.setHistory(e,t)})),this.panel.on("panel-open",(e=>this.triggerEvent("app-open",e))),this.on("before:message",(n=>{if(n.panelId===e)return(0,t.f0)(n,{app:this})})),this.panel.whenReady().then((()=>{this.triggerEvent("app-load"),this.whenLoaded.resolve()})),this.panel.on("message",((t,n)=>{"request:file-browser-open"===t.name&&t.panelId===e&&(f.log("request:file-browser-open"),this.filebrowser.loadFilebrowser(n))})),this.triggerEvent("app-build"),this.whenBuilt.resolve()}}async#Oe(e){if(e.target)return f.log("App "+this.#Le+" opening "+e.target+" url in overlay"),await this.overlays.open(e);if(e.url){let t={url:new URL(e.url,this.environment.url)};if(await this.whenLoaded(),this.match(t))return f.log("found matching navigation app by url"),this.overlays.closeAll(!0),await this.load(e.url);f.info("requested app did not match")}}async load(e,t){await Promise.all([this.whenInitialized(),this.whenBuilt(),this.environment.whenReady()]),f.log("autoloading"),await this.panel.open(e,t)}async reset(){await Promise.all([this.whenBuilt(),this.environment.whenReady()]),await this.panel.reset()}async remove(){f.debug("Removing app",this.uid),this.panel&&await this.panel.remove(null,!0),v.#Ae=v.#Ae.filter((e=>!e.match(this)))}async openBrowserState(e){if(e&&(await this.whenBuilt(),this.overlays.closeAll(!0),e&&Object.keys(e).length)){var t=[];for(var n in f.debug("history: opening state",e),e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];f.log("checking history state",n),r.id==="overlays-"+this.#Le?(f.log("found overlay history",r.overlays?.length),r.overlays?.length&&r.overlays.forEach((e=>{f.log("restoring overlay history",e),t.push(this.overlays.openState(e))}))):r.id===this.#Le&&(f.debug("history: setting panel state",r.panelId),t.push(this.panel.setState(r)))}await Promise.all(t)}}async postMessage(e,t){await this.whenBuilt(),await this.panel.postMessage(e,t)}match(e){if(e){if(e.uid&&this.uid)return(0,t.yv)(e.uid,this.uid);if(e.type&&this.type&&!this.uid)return(0,t.yv)(e.type,this.type);if(e.url&&this.url){let t=new URL(e.url),n=new URL(this.url),r=t.href===n.href;n.pathname.endsWith("/")||(n.pathname+="/");let i=t.href.startsWith(n.href);return r||i}}return!1}}window.customElements.define("weavy-app",v);class b extends v{static defaults={type:"messenger",badge:!0,pollingTime:6e4};#Te;static get observedAttributes(){return super.observedAttributes.concat(["badge","polling"])}get badge(){return this.hasAttribute("badge")||b.defaults.badge}set badge(e){e?this.setAttribute("badge",""):this.removeAttribute("badge")}get pollingTime(){return this.getAttribute("polling")||b.defaults.pollingTime}set pollingTime(e){e?this.setAttribute("polling",e):this.removeAttribute("polling")}constructor(e){super(e=(0,t.f0)(b.defaults,e,!0)),this.on("message",{name:"badge"},(e=>{this.badge&&this.triggerEvent("badge",{count:e.count})}))}connectedCallback(){super.connectedCallback(),this.options.badge&&(this.options.pollingTime&&(this.pollingTime=this.options.pollingTime),this.badge=this.options.badge)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),"badge"!==e&&"polling"!==e||(console.log("Updating badge"),this.badge?(this.#Te&&(clearInterval(this.#Te),this.#Te=null),this.#Te=window.setInterval((()=>this.getBadge()),this.pollingTime),this.whenLoaded().then((()=>{clearInterval(this.#Te),this.#Te=null,this.getBadge()})),this.getBadge()):this.#Te&&(clearInterval(this.#Te),this.#Te=null))}async fetchBadges(){const e=await this.environment.fetch("dropin/client/conversation-badge/");return e.private+e.rooms}async getBadge(){if(this.badge){const e=await this.fetchBadges();this.triggerEvent("badge",{count:e})}}}customElements.define("weavy-messenger",b);class k extends v{static defaults={type:"chat"};constructor(e){super((0,t.f0)(k.defaults,e,!0))}}customElements.define("weavy-chat",k);class _ extends v{static defaults={type:"files"};constructor(e){super((0,t.f0)(_.defaults,e,!0))}}customElements.define("weavy-files",_);class I extends v{static defaults={type:"posts"};constructor(e){super((0,t.f0)(I.defaults,e,!0))}}customElements.define("weavy-posts",I)})();var __webpack_exports__Chat=__webpack_exports__.Chat,__webpack_exports__Files=__webpack_exports__.Files,__webpack_exports__Messenger=__webpack_exports__.Messenger,__webpack_exports__Posts=__webpack_exports__.Posts,__webpack_exports__Weavy=__webpack_exports__.Weavy,__webpack_exports__WeavyApp=__webpack_exports__.WeavyApp;export{__webpack_exports__Chat as Chat,__webpack_exports__Files as Files,__webpack_exports__Messenger as Messenger,__webpack_exports__Posts as Posts,__webpack_exports__Weavy as Weavy,__webpack_exports__WeavyApp as WeavyApp};